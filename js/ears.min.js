(function(d,f,b,e,l,p){function q(a,c){var h=typeof a[c];return"function"==h||!!("object"==h&&a[c])||"unknown"==h}function y(){if(!x(navigator.plugins)&&"object"==typeof navigator.plugins["Shockwave Flash"]){var a=navigator.plugins["Shockwave Flash"].description;a&&(!x(navigator.mimeTypes)&&navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)&&(A=a.match(/\d+/g))}if(!A){var c;try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),
A=Array.prototype.slice.call(c.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1)}catch(h){}}if(!A)return!1;a=parseInt(A[0],10);c=parseInt(A[1],10);P=9<a&&0<c;return!0}function J(){if(!B){B=!0;for(var a=0;a<K.length;a++)K[a]();K.length=0}}function C(a,c){B?a.call(c):K.push(function(){a.call(c)})}function $(){var a=parent;if(""!==G)for(var c=0,h=G.split(".");c<h.length;c++)a=a[h[c]];return a.easyXDM}function s(a){var c=a.toLowerCase().match(L);a=c[2];var h=c[3],c=c[4]||"";if("http:"==a&&":80"==
c||"https:"==a&&":443"==c)c="";return a+"//"+h+c}function H(a){a=a.replace(aa,"$1/");if(!a.match(/^(http||https):\/\//)){var c="/"===a.substring(0,1)?"":b.pathname;"/"!==c.substring(c.length-1)&&(c=c.substring(0,c.lastIndexOf("/")+1));a=b.protocol+"//"+b.host+c+a}for(;T.test(a);)a=a.replace(T,"");return a}function D(a,c){var h="",b=a.indexOf("#");-1!==b&&(h=a.substring(b),a=a.substring(0,b));var b=[],k;for(k in c)c.hasOwnProperty(k)&&b.push(k+"\x3d"+p(c[k]));return a+(U?"#":-1==a.indexOf("?")?"?":
"\x26")+b.join("\x26")+h}function x(a){return"undefined"===typeof a}function t(a,c,h){var b,k;for(k in c)c.hasOwnProperty(k)&&(k in a?(b=c[k],"object"===typeof b?t(a[k],b,h):h||(a[k]=c[k])):a[k]=c[k]);return a}function z(a){if(x(M)){var c=f.body.appendChild(f.createElement("form")),h=c.appendChild(f.createElement("input"));h.name=v+"TEST"+V;M=h!==c.elements[h.name];f.body.removeChild(c)}M?c=f.createElement('\x3ciframe name\x3d"'+a.props.name+'"/\x3e'):(c=f.createElement("IFRAME"),c.name=a.props.name);
c.id=c.name=a.props.name;delete a.props.name;"string"==typeof a.container&&(a.container=f.getElementById(a.container));a.container||(t(c.style,{position:"absolute",top:"-2000px",left:"0px"}),a.container=f.body);h=a.props.src;a.props.src="javascript:false";t(c,a.props);c.border=c.frameBorder=0;c.allowTransparency=!0;a.container.appendChild(c);a.onLoad&&w(c,"load",a.onLoad);if(a.usePost){var b=a.container.appendChild(f.createElement("form")),k;b.target=c.name;b.action=h;b.method="POST";if("object"===
typeof a.usePost)for(var n in a.usePost)a.usePost.hasOwnProperty(n)&&(M?k=f.createElement('\x3cinput name\x3d"'+n+'"/\x3e'):(k=f.createElement("INPUT"),k.name=n),k.value=a.usePost[n],b.appendChild(k));b.submit();b.parentNode.removeChild(b)}else c.src=h;a.props.src=h;return c}function W(a){var c=a.protocol,h;a.isHost=a.isHost||x(u.xdm_p);U=a.hash||!1;a.props||(a.props={});if(a.isHost)a.remote=H(a.remote),a.channel=a.channel||"default"+V++,a.secret=Math.random().toString(16).substring(2),x(c)&&(c=s(b.href)==
s(a.remote)?"4":q(d,"postMessage")||q(f,"postMessage")?"1":a.swf&&q(d,"ActiveXObject")&&y()?"6":"Gecko"===navigator.product&&"frameElement"in d&&-1==navigator.userAgent.indexOf("WebKit")?"5":a.remoteHelper?"2":"0");else{a.channel=u.xdm_c.replace(/["'<>\\]/g,"");a.secret=u.xdm_s;a.remote=u.xdm_e.replace(/["'<>\\]/g,"");var c=u.xdm_p,m;if(m=a.acl){a:{m=a.acl;var k=a.remote;"string"==typeof m&&(m=[m]);for(var n,e=m.length;e--;)if(n=m[e],n=RegExp("^"==n.substr(0,1)?n:"^"+n.replace(/(\*)/g,".$1").replace(/\?/g,
".")+"$"),n.test(k)){m=!0;break a}m=!1}m=!m}if(m)throw Error("Access denied for "+a.remote);}a.protocol=c;switch(c){case "0":t(a,{interval:100,delay:2E3,useResize:!0,useParent:!1,usePolling:!1},!0);if(a.isHost){if(!a.local){c=b.protocol+"//"+b.host;h=f.body.getElementsByTagName("img");for(k=h.length;k--;)if(m=h[k],m.src.substring(0,c.length)===c){a.local=m.src;break}a.local||(a.local=d)}c={xdm_c:a.channel,xdm_p:0};a.local===d?(a.usePolling=!0,a.useParent=!0,a.local=b.protocol+"//"+b.host+b.pathname+
b.search,c.xdm_e=a.local,c.xdm_pa=1):c.xdm_e=H(a.local);a.container&&(a.useResize=!1,c.xdm_po=1);a.remote=D(a.remote,c)}else t(a,{channel:u.xdm_c,remote:u.xdm_e,useParent:!x(u.xdm_pa),usePolling:!x(u.xdm_po),useResize:a.useParent?!1:a.useResize});h=[new g.stack.HashTransport(a),new g.stack.ReliableBehavior({}),new g.stack.QueueBehavior({encode:!0,maxLength:4E3-a.remote.length}),new g.stack.VerifyBehavior({initiate:a.isHost})];break;case "1":h=[new g.stack.PostMessageTransport(a)];break;case "2":a.remoteHelper=
H(a.remoteHelper);h=[new g.stack.NameTransport(a),new g.stack.QueueBehavior,new g.stack.VerifyBehavior({initiate:a.isHost})];break;case "3":h=[new g.stack.NixTransport(a)];break;case "4":h=[new g.stack.SameOriginTransport(a)];break;case "5":h=[new g.stack.FrameElementTransport(a)];break;case "6":A||y(),h=[new g.stack.FlashTransport(a)]}h.push(new g.stack.QueueBehavior({lazy:a.lazy,remove:!0}));return h}function X(a){for(var c,h={incoming:function(a,c){this.up.incoming(a,c)},outgoing:function(a,c){this.down.outgoing(a,
c)},callback:function(a){this.up.callback(a)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},b=0,k=a.length;b<k;b++)c=a[b],t(c,h,!0),0!==b&&(c.down=a[b-1]),b!==k-1&&(c.up=a[b+1]);return c}function ba(a){a.up.down=a.down;a.down.up=a.up;a.up=a.down=null}var N=this,V=Math.floor(1E4*Math.random()),Q=Function.prototype,L=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,T=/[\-\w]+\/\.\.\//,aa=/([^:])\/\//g,G="",g={},ca=d.easyXDM,v="easyXDM_",M,U=!1,A,P,w,F;if(q(d,"addEventListener"))w=function(a,
c,b){a.addEventListener(c,b,!1)},F=function(a,c,b){a.removeEventListener(c,b,!1)};else if(q(d,"attachEvent"))w=function(a,c,b){a.attachEvent("on"+c,b)},F=function(a,c,b){a.detachEvent("on"+c,b)};else throw Error("Browser not supported");var B=!1,K=[],O;"readyState"in f?(O=f.readyState,B="complete"==O||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==O||"interactive"==O)):B=!!f.body;if(!B){if(q(d,"addEventListener"))w(f,"DOMContentLoaded",J);else if(w(f,"readystatechange",function(){"complete"==
f.readyState&&J()}),f.documentElement.doScroll&&d===top){var Y=function(){if(!B){try{f.documentElement.doScroll("left")}catch(a){e(Y,1);return}J()}};Y()}w(d,"load",J)}var u=function(a){a=a.substring(1).split("\x26");for(var c={},b,m=a.length;m--;)b=a[m].split("\x3d"),c[b[0]]=l(b[1]);return c}(/xdm_e=/.test(b.search)?b.search:b.hash),R=function(){var a={},c={a:[1,2,3]};if("undefined"!=typeof JSON&&"function"===typeof JSON.stringify&&'{"a":[1,2,3]}'===JSON.stringify(c).replace(/\s/g,""))return JSON;
Object.toJSON&&'{"a":[1,2,3]}'===Object.toJSON(c).replace(/\s/g,"")&&(a.stringify=Object.toJSON);"function"===typeof String.prototype.evalJSON&&(c='{"a":[1,2,3]}'.evalJSON(),c.a&&(3===c.a.length&&3===c.a[2])&&(a.parse=function(a){return a.evalJSON()}));return a.stringify&&a.parse?(R=function(){return a},a):null};t(g,{version:"2.4.17.1",query:u,stack:{},apply:t,getJSONObject:R,whenReady:C,noConflict:function(a){d.easyXDM=ca;(G=a)&&(v="easyXDM_"+G.replace(".","_")+"_");return g}});g.DomHelper={on:w,
un:F,requiresJSON:function(a){"object"==typeof d.JSON&&d.JSON||f.write('\x3cscript type\x3d"text/javascript" src\x3d"'+a+'"\x3e\x3c/script\x3e')}};(function(){var a={};g.Fn={set:function(c,b){a[c]=b},get:function(c,b){var m=a[c];b&&delete a[c];return m}}})();g.Socket=function(a){var c=X(W(a).concat([{incoming:function(c,b){a.onMessage(c,b)},callback:function(c){if(a.onReady)a.onReady(c)}}])),b=s(a.remote);this.origin=s(a.remote);this.destroy=function(){c.destroy()};this.postMessage=function(a){c.outgoing(a,
b)};c.init()};g.Rpc=function(a,c){if(c.local)for(var b in c.local)if(c.local.hasOwnProperty(b)){var e=c.local[b];"function"===typeof e&&(c.local[b]={method:e})}var k=X(W(a).concat([new g.stack.RpcBehavior(this,c),{callback:function(c){if(a.onReady)a.onReady(c)}}]));this.origin=s(a.remote);this.destroy=function(){k.destroy()};k.init()};g.stack.SameOriginTransport=function(a){var c,h,m,k;return c={outgoing:function(a,c,b){m(a);b&&b()},destroy:function(){h&&(h.parentNode.removeChild(h),h=null)},onDOMReady:function(){k=
s(a.remote);a.isHost?(t(a.props,{src:D(a.remote,{xdm_e:b.protocol+"//"+b.host+b.pathname,xdm_c:a.channel,xdm_p:4}),name:v+a.channel+"_provider"}),h=z(a),g.Fn.set(a.channel,function(a){m=a;e(function(){c.up.callback(!0)},0);return function(a){c.up.incoming(a,k)}})):(m=$().Fn.get(a.channel,!0)(function(a){c.up.incoming(a,k)}),e(function(){c.up.callback(!0)},0))},init:function(){C(c.onDOMReady,c)}}};g.stack.FlashTransport=function(a){function c(a,c){e(function(){m.up.incoming(a,n)},0)}function h(c){var b=
a.swf+"?host\x3d"+a.isHost,h="easyXDM_swf_"+Math.floor(1E4*Math.random());g.Fn.set("flash_loaded"+c.replace(/[\-.]/g,"_"),function(){g.stack.FlashTransport[c].swf=E=d.firstChild;for(var a=g.stack.FlashTransport[c].queue,b=0;b<a.length;b++)a[b]();a.length=0});a.swfContainer?d="string"==typeof a.swfContainer?f.getElementById(a.swfContainer):a.swfContainer:(d=f.createElement("div"),t(d.style,P&&a.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",
overflow:"hidden",right:0,top:0}),f.body.appendChild(d));var e="callback\x3dflash_loaded"+c.replace(/[\-.]/g,"_")+"\x26proto\x3d"+N.location.protocol+"\x26domain\x3d"+N.location.href.match(L)[3]+"\x26port\x3d"+(N.location.href.match(L)[4]||"")+"\x26ns\x3d"+G;d.innerHTML="\x3cobject height\x3d'20' width\x3d'20' type\x3d'application/x-shockwave-flash' id\x3d'"+h+"' data\x3d'"+b+"'\x3e\x3cparam name\x3d'allowScriptAccess' value\x3d'always'\x3e\x3c/param\x3e\x3cparam name\x3d'wmode' value\x3d'transparent'\x3e\x3cparam name\x3d'movie' value\x3d'"+
b+"'\x3e\x3c/param\x3e\x3cparam name\x3d'flashvars' value\x3d'"+e+"'\x3e\x3c/param\x3e\x3cembed type\x3d'application/x-shockwave-flash' FlashVars\x3d'"+e+"' allowScriptAccess\x3d'always' wmode\x3d'transparent' src\x3d'"+b+"' height\x3d'1' width\x3d'1'\x3e\x3c/embed\x3e\x3c/object\x3e"}var m,k,n,E,d;return m={outgoing:function(c,b,h){E.postMessage(a.channel,c.toString());h&&h()},destroy:function(){try{E.destroyChannel(a.channel)}catch(c){}E=null;k&&(k.parentNode.removeChild(k),k=null)},onDOMReady:function(){n=
a.remote;g.Fn.set("flash_"+a.channel+"_init",function(){e(function(){m.up.callback(!0)})});g.Fn.set("flash_"+a.channel+"_onMessage",c);a.swf=H(a.swf);var d=a.swf.match(L)[3],r=function(){g.stack.FlashTransport[d].init=!0;E=g.stack.FlashTransport[d].swf;E.createChannel(a.channel,a.secret,s(a.remote),a.isHost);a.isHost&&(P&&a.swfNoThrottle&&t(a.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),t(a.props,{src:D(a.remote,{xdm_e:s(b.href),xdm_c:a.channel,xdm_p:6,xdm_s:a.secret}),name:v+
a.channel+"_provider"}),k=z(a))};g.stack.FlashTransport[d]&&g.stack.FlashTransport[d].init?r():g.stack.FlashTransport[d]?g.stack.FlashTransport[d].queue.push(r):(g.stack.FlashTransport[d]={queue:[r]},h(d))},init:function(){C(m.onDOMReady,m)}}};g.stack.PostMessageTransport=function(a){function c(c){var e;if(c.origin)e=s(c.origin);else if(c.uri)e=s(c.uri);else if(c.domain)e=b.protocol+"//"+c.domain;else throw"Unable to retrieve the origin of the event";e==n&&c.data.substring(0,a.channel.length+1)==
a.channel+" "&&h.up.incoming(c.data.substring(a.channel.length+1),e)}var h,m,k,n;return h={outgoing:function(c,b,h){k.postMessage(a.channel+" "+c,b||n);h&&h()},destroy:function(){F(d,"message",c);m&&(k=null,m.parentNode.removeChild(m),m=null)},onDOMReady:function(){n=s(a.remote);if(a.isHost){var g=function(b){b.data==a.channel+"-ready"&&(k="postMessage"in m.contentWindow?m.contentWindow:m.contentWindow.document,F(d,"message",g),w(d,"message",c),e(function(){h.up.callback(!0)},0))};w(d,"message",g);
t(a.props,{src:D(a.remote,{xdm_e:s(b.href),xdm_c:a.channel,xdm_p:1}),name:v+a.channel+"_provider"});m=z(a)}else w(d,"message",c),k="postMessage"in d.parent?d.parent:d.parent.document,k.postMessage(a.channel+"-ready",n),e(function(){h.up.callback(!0)},0)},init:function(){C(h.onDOMReady,h)}}};g.stack.FrameElementTransport=function(a){var c,h,m,k;return c={outgoing:function(a,c,b){m.call(this,a);b&&b()},destroy:function(){h&&(h.parentNode.removeChild(h),h=null)},onDOMReady:function(){k=s(a.remote);a.isHost?
(t(a.props,{src:D(a.remote,{xdm_e:s(b.href),xdm_c:a.channel,xdm_p:5}),name:v+a.channel+"_provider"}),h=z(a),h.fn=function(a){delete h.fn;m=a;e(function(){c.up.callback(!0)},0);return function(a){c.up.incoming(a,k)}}):(f.referrer&&s(f.referrer)!=u.xdm_e&&(d.top.location=u.xdm_e),m=d.frameElement.fn(function(a){c.up.incoming(a,k)}),c.up.callback(!0))},init:function(){C(c.onDOMReady,c)}}};g.stack.NameTransport=function(a){function c(c){l.contentWindow.sendMessage(c,a.remoteHelper+(f?"#_3":"#_2")+a.channel)}
function b(){f?(2===++r||!f)&&n.up.callback(!0):(c("ready"),n.up.callback(!0))}function d(a){n.up.incoming(a,I)}function k(){S&&e(function(){S(!0)},0)}var n,f,l,p,r,S,I,Z;return n={outgoing:function(a,b,h){S=h;c(a)},destroy:function(){l.parentNode.removeChild(l);l=null;f&&(p.parentNode.removeChild(p),p=null)},onDOMReady:function(){f=a.isHost;r=0;I=s(a.remote);a.local=H(a.local);f?(g.Fn.set(a.channel,function(c){f&&"ready"===c&&(g.Fn.set(a.channel,d),b())}),Z=D(a.remote,{xdm_e:a.local,xdm_c:a.channel,
xdm_p:2}),t(a.props,{src:Z+"#"+a.channel,name:v+a.channel+"_provider"}),p=z(a)):(a.remoteHelper=a.remote,g.Fn.set(a.channel,d));var c=function(){var d=l||this;F(d,"load",c);g.Fn.set(a.channel+"_load",k);(function fa(){"function"==typeof d.contentWindow.sendMessage?b():e(fa,50)})()};l=z({props:{src:a.local+"#_4"+a.channel},onLoad:c})},init:function(){C(n.onDOMReady,n)}}};g.stack.HashTransport=function(a){function c(){if(l){var a=l.location.href,c="",e=a.indexOf("#");-1!=e&&(c=a.substring(e));c&&c!=
g&&(g=c,b.up.incoming(g.substring(g.indexOf("_")+1),I))}}var b,m,k,n,g,f,l,r,p,I;return b={outgoing:function(c,b){if(r){var h=a.remote+"#"+f++ +"_"+c;(m||!p?r.contentWindow:r).location=h}},destroy:function(){d.clearInterval(k);(m||!p)&&r.parentNode.removeChild(r);r=null},onDOMReady:function(){m=a.isHost;n=a.interval;g="#"+a.channel;f=0;p=a.useParent;I=s(a.remote);if(m){t(a.props,{src:a.remote,name:v+a.channel+"_provider"});if(p)a.onLoad=function(){l=d;k=setInterval(c,n);b.up.callback(!0)};else{var q=
0,da=a.delay/50;(function ea(){if(++q>da)throw Error("Unable to reference listenerwindow");try{l=r.contentWindow.frames[v+a.channel+"_consumer"]}catch(d){}l?(k=setInterval(c,n),b.up.callback(!0)):e(ea,50)})()}r=z(a)}else l=d,k=setInterval(c,n),p?(r=parent,b.up.callback(!0)):(t(a,{props:{src:a.remote+"#"+a.channel+new Date,name:v+a.channel+"_consumer"},onLoad:function(){b.up.callback(!0)}}),r=z(a))},init:function(){C(b.onDOMReady,b)}}};g.stack.ReliableBehavior=function(a){var c,b,e=0,d=0,g="";return c=
{incoming:function(a,l){var f=a.indexOf("_"),p=a.substring(0,f).split(",");a=a.substring(f+1);p[0]==e&&(g="",b&&(b(!0),b=null));0<a.length&&(c.down.outgoing(p[1]+","+e+"_"+g,l),d!=p[1]&&(d=p[1],c.up.incoming(a,l)))},outgoing:function(a,l,f){g=a;b=f;c.down.outgoing(d+","+ ++e+"_"+a,l)}}};g.stack.QueueBehavior=function(a){function c(){if(a.remove&&0===d.length)ba(b);else if(!k&&!(0===d.length||f)){k=!0;var g=d.shift();b.down.outgoing(g.data,g.origin,function(a){k=!1;g.callback&&e(function(){g.callback(a)},
0);c()})}}var b,d=[],k=!0,g="",f,q=0,s=!1,r=!1;return b={init:function(){x(a)&&(a={});a.maxLength&&(q=a.maxLength,r=!0);a.lazy?s=!0:b.down.init()},callback:function(a){k=!1;var e=b.up;c();e.callback(a)},incoming:function(c,e){if(r){var d=c.indexOf("_"),k=parseInt(c.substring(0,d),10);g+=c.substring(d+1);0===k&&(a.encode&&(g=l(g)),b.up.incoming(g,e),g="")}else b.up.incoming(c,e)},outgoing:function(e,g,k){a.encode&&(e=p(e));var f=[],l;if(r){for(;0!==e.length;)l=e.substring(0,q),e=e.substring(l.length),
f.push(l);for(;l=f.shift();)d.push({data:f.length+"_"+l,origin:g,callback:0===f.length?k:null})}else d.push({data:e,origin:g,callback:k});s?b.down.init():c()},destroy:function(){f=!0;b.down.destroy()}}};g.stack.VerifyBehavior=function(a){function c(){e=Math.random().toString(16).substring(2);b.down.outgoing(e)}var b,e,d;return b={incoming:function(g,f){var l=g.indexOf("_");-1===l?g===e?b.up.callback(!0):d||(d=g,a.initiate||c(),b.down.outgoing(g)):g.substring(0,l)===d&&b.up.incoming(g.substring(l+
1),f)},outgoing:function(a,c,d){b.down.outgoing(e+"_"+a,c,d)},callback:function(b){a.initiate&&c()}}};g.stack.RpcBehavior=function(a,c){function b(a){a.jsonrpc="2.0";g.down.outgoing(l.stringify(a))}function e(a,c){var d=Array.prototype.slice;return function(){var e=arguments.length,g,l={method:c};0<e&&"function"===typeof arguments[e-1]?(1<e&&"function"===typeof arguments[e-2]?(g={success:arguments[e-2],error:arguments[e-1]},l.params=d.call(arguments,0,e-2)):(g={success:arguments[e-1]},l.params=d.call(arguments,
0,e-1)),p[""+ ++f]=g,l.id=f):l.params=d.call(arguments,0);a.namedParams&&1===l.params.length&&(l.params=l.params[0]);b(l)}}function d(a,c,e,g){if(e){var l,f;c?(l=function(a){l=Q;b({id:c,result:a})},f=function(a,e){f=Q;var d={id:c,error:{code:-32099,message:a}};e&&(d.error.data=e);b(d)}):l=f=Q;"[object Array]"!==Object.prototype.toString.call(g)&&(g=[g]);try{var k=e.method.apply(e.scope,g.concat([l,f]));x(k)||l(k)}catch(p){f(p.message)}}else c&&b({id:c,error:{code:-32601,message:"Procedure not found."}})}
var g,l=c.serializer||R(),f=0,p={};return g={incoming:function(a,e){var g=l.parse(a);if(g.method)c.handle?c.handle(g,b):d(g.method,g.id,c.local[g.method],g.params);else{var f=p[g.id];g.error?f.error&&f.error(g.error):f.success&&f.success(g.result);delete p[g.id]}},init:function(){if(c.remote)for(var b in c.remote)c.remote.hasOwnProperty(b)&&(a[b]=e(c.remote[b],b));g.down.init()},destroy:function(){for(var b in c.remote)c.remote.hasOwnProperty(b)&&a.hasOwnProperty(b)&&delete a[b];g.down.destroy()}}};
N.easyXDM=g})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent);var Adfab=Adfab||{},PG={},_plgd_settings=_plgd_settings||{},pl_config={debug:!0,mode:"dev",env:{dev:{url:"localhost/playground-ears/",send:"send.php",connect:"connect.php"},prod:{url:"livedemo.fr/playground/",send:"send.php",connect:"connect.php"}},ns:"Adfab.playground"};var pl={ready:function(d){document.addEventListener?document.addEventListener("DOMContentLoaded",d,!1):window.addEventListener?window.addEventListener("load",d,!1):document.attachEvent?document.attachEvent("onreadystatechange",d):window.attachEvent&&window.attachEvent("onload",d)}};function extend(d,f){var b=Object.prototype.toString,e=b.call({}),l;for(l in f)f[l]&&e==b.call(f[l])?(d[l]=d[l]||{},extend(d[l],f[l])):d[l]=f[l];return d}function addToNamespace(d,f){var b={};b[d]=f;return extend(Adfab,{Playground:b})};pl.ready(function(){cache={window:window,document:document,xmlhttp:window.XMLHttpRequest,protocol:"https:"==document.location.protocol?"https://":"http://",isTouchDevice:!!("ontouchstart"in window)||!!("onmsgesturechange"in window),clickEvent:"ontouchstart"in window||"onmsgesturechange"in window?"touchstart":"click",config:pl_config,settings:_plgd_settings,localstorage:"undefined"==typeof window.localStorage||"undefined"==typeof window.sessionStorage?!1:!0};try{addToNamespace("Cache",cache)}catch(d){throw Error("Cannot extends 'cache' to 'Adfab.playground.Cache'");
}});pl.ready(function(){var d=function(){};d.prototype={pending:{resolve:function(){},reject:function(){}},then:function(b,e){this.pending={resolve:b,reject:e};return this},resolve:function(b){this.pending.resolve(b)},reject:function(b){this.pending.reject(b)}};try{addToNamespace("Promise",d)}catch(f){throw Error("Cannot extends 'Promise' to 'Adfab.playground.Promise'");}});pl.ready(function(){var d={not_null:function(b){return null!=b?"undefined"!=typeof b?""!==b?!0:!1:!1:!1},checkXpath:function(b){b=document.evaluate(b,document.documentElement,null,XPathResult.ORDERED_NODE_ITERATOR_TYPE,null);var e=0;if(b)for(var d=b.iterateNext();d;)e++,d=b.iterateNext();return 0<e?!0:!1},getValueFromObject:function(b){var e="";PG.Util.not_null(b)&&("object"==typeof b&&void 0!=b.type)&&(void 0!=b.value?e=b.value:void 0!=b.innerHTML&&(e=b.innerHTML));return e},createCookie:function(b,
e,d){if(PG.Cache.localstorage)localStorage.setItem(PG.Cache.config.ns+"."+b,e);else{if(d){var f=new Date;f.setTime(f.getTime()+864E5*d);d="; expires\x3d"+f.toGMTString()}else d="";document.cookie=PG.Cache.config.ns+"."+b+"\x3d"+encodeURIComponent(e)+d+"; path\x3d/"}},readCookie:function(b){if(PG.Cache.localstorage)return localStorage.getItem(PG.Cache.config.ns+"."+b);b=PG.Cache.config.ns+"."+b+"\x3d";for(var e=document.cookie.split(";"),d=0,f="",d=0;d<e.length;d++){for(f=e[d];" "==f.charAt(0);)f=
f.substring(1,f.length);if(0==f.indexOf(b))return decodeURIComponent(f.substring(b.length,f.length))}return null},eraseCookie:function(b){if(PG.Cache.localstorage)return localStorage.removeItem(PG.Cache.config.ns+"."+b);document.cookie=PG.Cache.config.ns+"."+b+"\x3d''; expires\x3dThu, 01 Jan 1970 00:00:01 GMT; path\x3d/"},matchUrl:function(b){try{return b=eval(b),b.test(top.location.href)}catch(e){return!1}},isUrlValid:function(b){return 0<=PG.Cache.config.env[PG.Cache.config.mode].url.indexOf(b)?
!1:!0},log:function(b){PG.Cache.config.debug&&(console.log("%c\x3e PLAYGROUND DEBUG ::","color:blue; font-weight:bold;"),console.log(b))},getDomElemntFromItem:function(b){var e=null;"id"===b.selector?e=document.getElementById(b.name):"class"===b.selector&&(e=document.getElementsByClassName(b.name),null!==e&&0<e.length&&(e=e[0]));return e}};try{addToNamespace("Util",d)}catch(f){throw Error("Cannot extends 'Util' to 'Adfab.playground.Util'");}});pl.ready(function(){var d={env:{},id:null,uid:null,data:{},urls:{current:top.location.href,prev:null},init:function(){PG.User.GenerateUniqueId();PG.User.urls.prev=PG.Util.readCookie("prev-url");var b=PG.Util.readCookie("authent"),e=PG.Util.readCookie("last-sync"),d=(new Date).getTime();if(!PG.Util.not_null(e)||parseInt(e)+86400<d)b=null;PG.Util.not_null(b)?(PG.User.data=JSON.parse(PG.Util.readCookie("authent")),PG.User.checkUser()):PG.User.loadAuthent().then(function(){PG.User.checkUser()})},isLogged:function(){var b;
if(""===PG.User.id||null===PG.User.id)PG.User.id=PG.Util.readCookie("login");b=PG.Util.not_null(PG.User.id)?!0:!1;PG.Util.log("isLogged : "+b);return b},loadAuthent:function(){var b=new PG.Promise;PG.App.call(PG.Cache.config.env[PG.Cache.config.mode].connect).then(function(e){PG.User.data=e;PG.Util.createCookie("last-sync",(new Date).getTime());PG.Util.createCookie("authent",JSON.stringify(e));b.resolve()});return b},checkUser:function(){PG.Util.not_null(PG.Util.readCookie("logout-try"))&&PG.Util.matchUrl(PG.User.data.logout.urls.success)?
PG.User.checkEvidences(PG.User.data.logout.evidences)&&PG.User.logout():PG.Util.not_null(PG.Util.readCookie("login-try"))&&PG.Util.matchUrl(PG.User.data.login.urls.success)?PG.User.checkEvidences(PG.User.data.login.evidences)?PG.User.login(PG.Util.readCookie("login-try")):PG.Util.eraseCookie("login-try"):PG.Util.not_null(PG.Util.readCookie("login"))?PG.User.login(PG.Util.readCookie("login")):PG.User.logout()},login:function(b){PG.Util.log('Login "'+b+'"');null!==b&&(PG.Util.eraseCookie("login-try"),
PG.User.id=b,PG.Util.createCookie("login",b),PG.Util.not_null(PG.User.data.urls),PG.App.send(top.location.href));return PG.User.data.id},logout:function(){PG.Util.log("User is out");PG.Util.eraseCookie("logout-try");PG.Util.eraseCookie("login");PG.User.id=null;PG.App.send(top.location.href)},GenerateUniqueId:function(){var b=PG.Util.readCookie("unique-id");PG.Util.not_null(b)||(b="body_"+(new Date).getTime(),PG.Util.createCookie("unique-id",b));return PG.User.uid=b},checkEvidences:function(b){var e=
null,d=!0,f;for(f in b)"id"===b[f].selector?e=document.getElementById(b[f].name):"class"===PG.User.data.evidences[f].selector&&(e=document.getElementsByClassName(b[f].name)),null===e&&(d=!1);return d},quit:function(){var b,e="";PG.Util.createCookie("prev-url",top.location.href);if(PG.Util.not_null(PG.User.data.login)&&PG.Util.not_null(PG.User.data.logout))if(!PG.User.isLogged()&&PG.Util.matchUrl(PG.User.data.login.urls.page)){for(b in PG.User.data.login.items)"object"===typeof PG.User.data.login.items[b]&&
(e+=""!==e?":":"",e+=PG.Util.getValueFromObject(PG.Util.getDomElemntFromItem(PG.User.data.login.items[b])));PG.Util.createCookie("login-try",e)}else PG.Util.matchUrl(PG.User.data.logout.urls.page)&&PG.Util.createCookie("logout-try","logout")}};try{addToNamespace("User",d)}catch(f){throw Error("Cannot extends 'User' to 'Adfab.playground.User'");}});pl.ready(function(){function d(){return this}d.prototype.init=function(){PG=Adfab.Playground;PG.Util.not_null(PG.Cache.settings)&&PG.Util.not_null(PG.Cache.settings.apiKey)?(PG.User.env=_plgd_settings,PG.Util.log("APIKEY FOUND \x3d "+PG.Cache.settings.apiKey),PG.App.easyXDM(),PG.App.bindEvent(),PG.User.init()):PG.Util.log("NOT APIKEY FOUND")};d.prototype.bindEvent=function(){var b,d,f;b=PG.Cache.xmlhttp.prototype.open;d=PG.Cache.xmlhttp.prototype.send;PG.Cache.xmlhttp.prototype.open=function(d,l){d||
(d="");l||(l="");b.apply(this,arguments);f=d;"get"==d.toLowerCase()&&l.split("?")};PG.Cache.xmlhttp.prototype.send=function(b,e){b||(b="");e||(e="");d.apply(this,arguments);f.toLowerCase()};PG.Cache.document.onreadystatechange=function(b){PG.Util.not_null(b.data)&&""!=b.data&&PG.App.send(b.data)};PG.Cache.window.onbeforeunload=function(b){PG.User.quit();return null}};d.prototype.easyXDM=function(){PG.App.rpc=new easyXDM.Rpc({local:PG.Cache.protocol+PG.Cache.config.env[PG.Cache.config.mode].url+"easyXDM/name.html",
swf:PG.Cache.protocol+PG.Cache.config.env[PG.Cache.config.mode].url+"easyXDM/easyxdm.swf",remote:PG.Cache.protocol+PG.Cache.config.env[PG.Cache.config.mode].url+"index.html"},{remote:{request:{}}})};d.prototype.send=function(b){var d=PG.Util.isUrlValid(b),f=PG.User.data.taxonomy.config.broadcast?"\x26xpath\x3dbroadcast":"xpath\x3d",q,y;for(q in PG.User.data.taxonomy.items)y=!1,PG.Util.not_null(PG.User.data.taxonomy.items[q].url)&&PG.Util.not_null(PG.User.data.taxonomy.items[q].xpath)&&PG.Util.matchUrl(PG.User.data.taxonomy.items[q].url)&&
PG.Util.not_null(PG.User.data.taxonomy.items[q].xpath)?y=!0:PG.Util.not_null(PG.User.data.taxonomy.items[q].url)&&PG.Util.matchUrl(PG.User.data.taxonomy.items[q].url)?y=!0:PG.Util.not_null(PG.User.data.taxonomy.items[q].xpath)&&PG.Util.checkXpath(PG.User.data.taxonomy.items[q].xpath)&&(y=!0),y&&(f+="xpath\x3d"===f?PG.User.data.taxonomy.items[q].id:"+"+PG.User.data.taxonomy.items[q].id);d&&"xpath\x3d"!==f&&(b=PG.Cache.protocol+PG.Cache.config.env[PG.Cache.config.mode].url+PG.Cache.config.env[PG.Cache.config.mode].send+
"?apiKey\x3d"+PG.Cache.settings.apiKey+"\x26url\x3d"+b+"\x26uid\x3d"+PG.User.uid+f,PG.Util.log("send url : "+b),PG.User.isLogged()&&(b+="\x26login\x3d"+PG.User.id),PG.App.rpc.request({url:b},function(b){PG.Util.log(b)},function(b){throw"Api Error, code : "+b.code+", msg : "+b.message;}));return d};d.prototype.call=function(b){var d=new PG.Promise;PG.Util.log("call service : "+b);PG.App.rpc.request({url:PG.Cache.protocol+PG.Cache.config.env[PG.Cache.config.mode].url+b+"?apiKey\x3d"+PG.Cache.settings.apiKey},
function(b){d.resolve(easyXDM.getJSONObject().parse(b.data))},function(b){throw"Api Error, code : "+b.code+", msg : "+b.message;});return d};var f=new d;try{addToNamespace("App",f)}catch(b){throw Error("Cannot extends 'app' to 'Adfab.playground.App'");}f.init()});