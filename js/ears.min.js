(function(d,g,b,e,l,u){function v(a,c){var k=typeof a[c];return"function"==k||!!("object"==k&&a[c])||"unknown"==k}function S(){if(!y(navigator.plugins)&&"object"==typeof navigator.plugins["Shockwave Flash"]){var a=navigator.plugins["Shockwave Flash"].description;a&&(!y(navigator.mimeTypes)&&navigator.mimeTypes["application/x-shockwave-flash"]&&navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)&&(B=a.match(/\d+/g))}if(!B){var c;try{c=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"),
B=Array.prototype.slice.call(c.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1)}catch(k){}}if(!B)return!1;a=parseInt(B[0],10);c=parseInt(B[1],10);P=9<a&&0<c;return!0}function I(){if(!C){C=!0;for(var a=0;a<J.length;a++)J[a]();J.length=0}}function D(a,c){C?a.call(c):J.push(function(){a.call(c)})}function Z(){var a=parent;if(""!==G)for(var c=0,k=G.split(".");c<k.length;c++)a=a[k[c]];return a.easyXDM}function r(a){var c=a.toLowerCase().match(K);a=c[2];var k=c[3],c=c[4]||"";if("http:"==a&&":80"==
c||"https:"==a&&":443"==c)c="";return a+"//"+k+c}function H(a){a=a.replace($,"$1/");if(!a.match(/^(http||https):\/\//)){var c="/"===a.substring(0,1)?"":b.pathname;"/"!==c.substring(c.length-1)&&(c=c.substring(0,c.lastIndexOf("/")+1));a=b.protocol+"//"+b.host+c+a}for(;T.test(a);)a=a.replace(T,"");return a}function E(a,c){var k="",h=a.indexOf("#");-1!==h&&(k=a.substring(h),a=a.substring(0,h));var h=[],b;for(b in c)c.hasOwnProperty(b)&&h.push(b+"\x3d"+u(c[b]));return a+(U?"#":-1==a.indexOf("?")?"?":
"\x26")+h.join("\x26")+k}function y(a){return"undefined"===typeof a}function s(a,c,k){var h,b;for(b in c)c.hasOwnProperty(b)&&(b in a?(h=c[b],"object"===typeof h?s(a[b],h,k):k||(a[b]=c[b])):a[b]=c[b]);return a}function A(a){if(y(L)){var c=g.body.appendChild(g.createElement("form")),k=c.appendChild(g.createElement("input"));k.name=w+"TEST"+V;L=k!==c.elements[k.name];g.body.removeChild(c)}L?c=g.createElement('\x3ciframe name\x3d"'+a.props.name+'"/\x3e'):(c=g.createElement("IFRAME"),c.name=a.props.name);
c.id=c.name=a.props.name;delete a.props.name;"string"==typeof a.container&&(a.container=g.getElementById(a.container));a.container||(s(c.style,{position:"absolute",top:"-2000px",left:"0px"}),a.container=g.body);k=a.props.src;a.props.src="javascript:false";s(c,a.props);c.border=c.frameBorder=0;c.allowTransparency=!0;a.container.appendChild(c);a.onLoad&&x(c,"load",a.onLoad);if(a.usePost){var b=a.container.appendChild(g.createElement("form")),e;b.target=c.name;b.action=k;b.method="POST";if("object"===
typeof a.usePost)for(var m in a.usePost)a.usePost.hasOwnProperty(m)&&(L?e=g.createElement('\x3cinput name\x3d"'+m+'"/\x3e'):(e=g.createElement("INPUT"),e.name=m),e.value=a.usePost[m],b.appendChild(e));b.submit();b.parentNode.removeChild(b)}else c.src=k;a.props.src=k;return c}function W(a){var c=a.protocol,k;a.isHost=a.isHost||y(t.xdm_p);U=a.hash||!1;a.props||(a.props={});if(a.isHost)a.remote=H(a.remote),a.channel=a.channel||"default"+V++,a.secret=Math.random().toString(16).substring(2),y(c)&&(c=r(b.href)==
r(a.remote)?"4":v(d,"postMessage")||v(g,"postMessage")?"1":a.swf&&v(d,"ActiveXObject")&&S()?"6":"Gecko"===navigator.product&&"frameElement"in d&&-1==navigator.userAgent.indexOf("WebKit")?"5":a.remoteHelper?"2":"0");else{a.channel=t.xdm_c.replace(/["'<>\\]/g,"");a.secret=t.xdm_s;a.remote=t.xdm_e.replace(/["'<>\\]/g,"");var c=t.xdm_p,h;if(h=a.acl){a:{h=a.acl;var e=a.remote;"string"==typeof h&&(h=[h]);for(var m,q=h.length;q--;)if(m=h[q],m=RegExp("^"==m.substr(0,1)?m:"^"+m.replace(/(\*)/g,".$1").replace(/\?/g,
".")+"$"),m.test(e)){h=!0;break a}h=!1}h=!h}if(h)throw Error("Access denied for "+a.remote);}a.protocol=c;switch(c){case "0":s(a,{interval:100,delay:2E3,useResize:!0,useParent:!1,usePolling:!1},!0);if(a.isHost){if(!a.local){c=b.protocol+"//"+b.host;k=g.body.getElementsByTagName("img");for(e=k.length;e--;)if(h=k[e],h.src.substring(0,c.length)===c){a.local=h.src;break}a.local||(a.local=d)}c={xdm_c:a.channel,xdm_p:0};a.local===d?(a.usePolling=!0,a.useParent=!0,a.local=b.protocol+"//"+b.host+b.pathname+
b.search,c.xdm_e=a.local,c.xdm_pa=1):c.xdm_e=H(a.local);a.container&&(a.useResize=!1,c.xdm_po=1);a.remote=E(a.remote,c)}else s(a,{channel:t.xdm_c,remote:t.xdm_e,useParent:!y(t.xdm_pa),usePolling:!y(t.xdm_po),useResize:a.useParent?!1:a.useResize});k=[new f.stack.HashTransport(a),new f.stack.ReliableBehavior({}),new f.stack.QueueBehavior({encode:!0,maxLength:4E3-a.remote.length}),new f.stack.VerifyBehavior({initiate:a.isHost})];break;case "1":k=[new f.stack.PostMessageTransport(a)];break;case "2":a.remoteHelper=
H(a.remoteHelper);k=[new f.stack.NameTransport(a),new f.stack.QueueBehavior,new f.stack.VerifyBehavior({initiate:a.isHost})];break;case "3":k=[new f.stack.NixTransport(a)];break;case "4":k=[new f.stack.SameOriginTransport(a)];break;case "5":k=[new f.stack.FrameElementTransport(a)];break;case "6":B||S(),k=[new f.stack.FlashTransport(a)]}k.push(new f.stack.QueueBehavior({lazy:a.lazy,remove:!0}));return k}function X(a){for(var c,k={incoming:function(a,c){this.up.incoming(a,c)},outgoing:function(a,c){this.down.outgoing(a,
c)},callback:function(a){this.up.callback(a)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}},b=0,e=a.length;b<e;b++)c=a[b],s(c,k,!0),0!==b&&(c.down=a[b-1]),b!==e-1&&(c.up=a[b+1]);return c}function aa(a){a.up.down=a.down;a.down.up=a.up;a.up=a.down=null}var M=this,V=Math.floor(1E4*Math.random()),Q=Function.prototype,K=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/,T=/[\-\w]+\/\.\.\//,$=/([^:])\/\//g,G="",f={},ba=d.easyXDM,w="easyXDM_",L,U=!1,B,P,x,F;if(v(d,"addEventListener"))x=function(a,
c,b){a.addEventListener(c,b,!1)},F=function(a,c,b){a.removeEventListener(c,b,!1)};else if(v(d,"attachEvent"))x=function(a,c,b){a.attachEvent("on"+c,b)},F=function(a,c,b){a.detachEvent("on"+c,b)};else throw Error("Browser not supported");var C=!1,J=[],N;"readyState"in g?(N=g.readyState,C="complete"==N||~navigator.userAgent.indexOf("AppleWebKit/")&&("loaded"==N||"interactive"==N)):C=!!g.body;if(!C){if(v(d,"addEventListener"))x(g,"DOMContentLoaded",I);else if(x(g,"readystatechange",function(){"complete"==
g.readyState&&I()}),g.documentElement.doScroll&&d===top){var Y=function(){if(!C){try{g.documentElement.doScroll("left")}catch(a){e(Y,1);return}I()}};Y()}x(d,"load",I)}var t=function(a){a=a.substring(1).split("\x26");for(var c={},b,h=a.length;h--;)b=a[h].split("\x3d"),c[b[0]]=l(b[1]);return c}(/xdm_e=/.test(b.search)?b.search:b.hash),R=function(){var a={},c={a:[1,2,3]};if("undefined"!=typeof JSON&&"function"===typeof JSON.stringify&&'{"a":[1,2,3]}'===JSON.stringify(c).replace(/\s/g,""))return JSON;
Object.toJSON&&'{"a":[1,2,3]}'===Object.toJSON(c).replace(/\s/g,"")&&(a.stringify=Object.toJSON);"function"===typeof String.prototype.evalJSON&&(c='{"a":[1,2,3]}'.evalJSON(),c.a&&(3===c.a.length&&3===c.a[2])&&(a.parse=function(a){return a.evalJSON()}));return a.stringify&&a.parse?(R=function(){return a},a):null};s(f,{version:"2.4.17.1",query:t,stack:{},apply:s,getJSONObject:R,whenReady:D,noConflict:function(a){d.easyXDM=ba;(G=a)&&(w="easyXDM_"+G.replace(".","_")+"_");return f}});f.DomHelper={on:x,
un:F,requiresJSON:function(a){"object"==typeof d.JSON&&d.JSON||g.write('\x3cscript type\x3d"text/javascript" src\x3d"'+a+'"\x3e\x3c/script\x3e')}};(function(){var a={};f.Fn={set:function(c,b){a[c]=b},get:function(c,b){var h=a[c];b&&delete a[c];return h}}})();f.Socket=function(a){var c=X(W(a).concat([{incoming:function(c,b){a.onMessage(c,b)},callback:function(c){if(a.onReady)a.onReady(c)}}])),b=r(a.remote);this.origin=r(a.remote);this.destroy=function(){c.destroy()};this.postMessage=function(a){c.outgoing(a,
b)};c.init()};f.Rpc=function(a,c){if(c.local)for(var b in c.local)if(c.local.hasOwnProperty(b)){var h=c.local[b];"function"===typeof h&&(c.local[b]={method:h})}var e=X(W(a).concat([new f.stack.RpcBehavior(this,c),{callback:function(c){if(a.onReady)a.onReady(c)}}]));this.origin=r(a.remote);this.destroy=function(){e.destroy()};e.init()};f.stack.SameOriginTransport=function(a){var c,k,h,d;return c={outgoing:function(a,c,b){h(a);b&&b()},destroy:function(){k&&(k.parentNode.removeChild(k),k=null)},onDOMReady:function(){d=
r(a.remote);a.isHost?(s(a.props,{src:E(a.remote,{xdm_e:b.protocol+"//"+b.host+b.pathname,xdm_c:a.channel,xdm_p:4}),name:w+a.channel+"_provider"}),k=A(a),f.Fn.set(a.channel,function(a){h=a;e(function(){c.up.callback(!0)},0);return function(a){c.up.incoming(a,d)}})):(h=Z().Fn.get(a.channel,!0)(function(a){c.up.incoming(a,d)}),e(function(){c.up.callback(!0)},0))},init:function(){D(c.onDOMReady,c)}}};f.stack.FlashTransport=function(a){function c(a,c){e(function(){h.up.incoming(a,m)},0)}function k(c){var b=
a.swf+"?host\x3d"+a.isHost,k="easyXDM_swf_"+Math.floor(1E4*Math.random());f.Fn.set("flash_loaded"+c.replace(/[\-.]/g,"_"),function(){f.stack.FlashTransport[c].swf=q=n.firstChild;for(var a=f.stack.FlashTransport[c].queue,b=0;b<a.length;b++)a[b]();a.length=0});a.swfContainer?n="string"==typeof a.swfContainer?g.getElementById(a.swfContainer):a.swfContainer:(n=g.createElement("div"),s(n.style,P&&a.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",
overflow:"hidden",right:0,top:0}),g.body.appendChild(n));var e="callback\x3dflash_loaded"+c.replace(/[\-.]/g,"_")+"\x26proto\x3d"+M.location.protocol+"\x26domain\x3d"+M.location.href.match(K)[3]+"\x26port\x3d"+(M.location.href.match(K)[4]||"")+"\x26ns\x3d"+G;n.innerHTML="\x3cobject height\x3d'20' width\x3d'20' type\x3d'application/x-shockwave-flash' id\x3d'"+k+"' data\x3d'"+b+"'\x3e\x3cparam name\x3d'allowScriptAccess' value\x3d'always'\x3e\x3c/param\x3e\x3cparam name\x3d'wmode' value\x3d'transparent'\x3e\x3cparam name\x3d'movie' value\x3d'"+
b+"'\x3e\x3c/param\x3e\x3cparam name\x3d'flashvars' value\x3d'"+e+"'\x3e\x3c/param\x3e\x3cembed type\x3d'application/x-shockwave-flash' FlashVars\x3d'"+e+"' allowScriptAccess\x3d'always' wmode\x3d'transparent' src\x3d'"+b+"' height\x3d'1' width\x3d'1'\x3e\x3c/embed\x3e\x3c/object\x3e"}var h,d,m,q,n;return h={outgoing:function(c,b,k){q.postMessage(a.channel,c.toString());k&&k()},destroy:function(){try{q.destroyChannel(a.channel)}catch(c){}q=null;d&&(d.parentNode.removeChild(d),d=null)},onDOMReady:function(){m=
a.remote;f.Fn.set("flash_"+a.channel+"_init",function(){e(function(){h.up.callback(!0)})});f.Fn.set("flash_"+a.channel+"_onMessage",c);a.swf=H(a.swf);var n=a.swf.match(K)[3],p=function(){f.stack.FlashTransport[n].init=!0;q=f.stack.FlashTransport[n].swf;q.createChannel(a.channel,a.secret,r(a.remote),a.isHost);a.isHost&&(P&&a.swfNoThrottle&&s(a.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"}),s(a.props,{src:E(a.remote,{xdm_e:r(b.href),xdm_c:a.channel,xdm_p:6,xdm_s:a.secret}),name:w+
a.channel+"_provider"}),d=A(a))};f.stack.FlashTransport[n]&&f.stack.FlashTransport[n].init?p():f.stack.FlashTransport[n]?f.stack.FlashTransport[n].queue.push(p):(f.stack.FlashTransport[n]={queue:[p]},k(n))},init:function(){D(h.onDOMReady,h)}}};f.stack.PostMessageTransport=function(a){function c(c){var e;if(c.origin)e=r(c.origin);else if(c.uri)e=r(c.uri);else if(c.domain)e=b.protocol+"//"+c.domain;else throw"Unable to retrieve the origin of the event";e==m&&c.data.substring(0,a.channel.length+1)==
a.channel+" "&&k.up.incoming(c.data.substring(a.channel.length+1),e)}var k,h,f,m;return k={outgoing:function(c,b,k){f.postMessage(a.channel+" "+c,b||m);k&&k()},destroy:function(){F(d,"message",c);h&&(f=null,h.parentNode.removeChild(h),h=null)},onDOMReady:function(){m=r(a.remote);if(a.isHost){var q=function(b){b.data==a.channel+"-ready"&&(f="postMessage"in h.contentWindow?h.contentWindow:h.contentWindow.document,F(d,"message",q),x(d,"message",c),e(function(){k.up.callback(!0)},0))};x(d,"message",q);
s(a.props,{src:E(a.remote,{xdm_e:r(b.href),xdm_c:a.channel,xdm_p:1}),name:w+a.channel+"_provider"});h=A(a)}else x(d,"message",c),f="postMessage"in d.parent?d.parent:d.parent.document,f.postMessage(a.channel+"-ready",m),e(function(){k.up.callback(!0)},0)},init:function(){D(k.onDOMReady,k)}}};f.stack.FrameElementTransport=function(a){var c,k,h,f;return c={outgoing:function(a,c,b){h.call(this,a);b&&b()},destroy:function(){k&&(k.parentNode.removeChild(k),k=null)},onDOMReady:function(){f=r(a.remote);a.isHost?
(s(a.props,{src:E(a.remote,{xdm_e:r(b.href),xdm_c:a.channel,xdm_p:5}),name:w+a.channel+"_provider"}),k=A(a),k.fn=function(a){delete k.fn;h=a;e(function(){c.up.callback(!0)},0);return function(a){c.up.incoming(a,f)}}):(g.referrer&&r(g.referrer)!=t.xdm_e&&(d.top.location=t.xdm_e),h=d.frameElement.fn(function(a){c.up.incoming(a,f)}),c.up.callback(!0))},init:function(){D(c.onDOMReady,c)}}};f.stack.NameTransport=function(a){function c(c){n.contentWindow.sendMessage(c,a.remoteHelper+(q?"#_3":"#_2")+a.channel)}
function b(){q?(2===++p||!q)&&m.up.callback(!0):(c("ready"),m.up.callback(!0))}function h(a){m.up.incoming(a,l)}function d(){z&&e(function(){z(!0)},0)}var m,q,n,g,p,z,l,O;return m={outgoing:function(a,b,k){z=k;c(a)},destroy:function(){n.parentNode.removeChild(n);n=null;q&&(g.parentNode.removeChild(g),g=null)},onDOMReady:function(){q=a.isHost;p=0;l=r(a.remote);a.local=H(a.local);q?(f.Fn.set(a.channel,function(c){q&&"ready"===c&&(f.Fn.set(a.channel,h),b())}),O=E(a.remote,{xdm_e:a.local,xdm_c:a.channel,
xdm_p:2}),s(a.props,{src:O+"#"+a.channel,name:w+a.channel+"_provider"}),g=A(a)):(a.remoteHelper=a.remote,f.Fn.set(a.channel,h));var c=function(){var h=n||this;F(h,"load",c);f.Fn.set(a.channel+"_load",d);(function da(){"function"==typeof h.contentWindow.sendMessage?b():e(da,50)})()};n=A({props:{src:a.local+"#_4"+a.channel},onLoad:c})},init:function(){D(m.onDOMReady,m)}}};f.stack.HashTransport=function(a){function c(){if(l){var a=l.location.href,c="",e=a.indexOf("#");-1!=e&&(c=a.substring(e));c&&c!=
g&&(g=c,b.up.incoming(g.substring(g.indexOf("_")+1),u))}}var b,h,f,m,g,n,l,p,z,u;return b={outgoing:function(c,b){if(p){var k=a.remote+"#"+n++ +"_"+c;(h||!z?p.contentWindow:p).location=k}},destroy:function(){d.clearInterval(f);(h||!z)&&p.parentNode.removeChild(p);p=null},onDOMReady:function(){h=a.isHost;m=a.interval;g="#"+a.channel;n=0;z=a.useParent;u=r(a.remote);if(h){s(a.props,{src:a.remote,name:w+a.channel+"_provider"});if(z)a.onLoad=function(){l=d;f=setInterval(c,m);b.up.callback(!0)};else{var O=
0,v=a.delay/50;(function ca(){if(++O>v)throw Error("Unable to reference listenerwindow");try{l=p.contentWindow.frames[w+a.channel+"_consumer"]}catch(h){}l?(f=setInterval(c,m),b.up.callback(!0)):e(ca,50)})()}p=A(a)}else l=d,f=setInterval(c,m),z?(p=parent,b.up.callback(!0)):(s(a,{props:{src:a.remote+"#"+a.channel+new Date,name:w+a.channel+"_consumer"},onLoad:function(){b.up.callback(!0)}}),p=A(a))},init:function(){D(b.onDOMReady,b)}}};f.stack.ReliableBehavior=function(a){var c,b,e=0,d=0,f="";return c=
{incoming:function(a,g){var l=a.indexOf("_"),p=a.substring(0,l).split(",");a=a.substring(l+1);p[0]==e&&(f="",b&&(b(!0),b=null));0<a.length&&(c.down.outgoing(p[1]+","+e+"_"+f,g),d!=p[1]&&(d=p[1],c.up.incoming(a,g)))},outgoing:function(a,g,l){f=a;b=l;c.down.outgoing(d+","+ ++e+"_"+a,g)}}};f.stack.QueueBehavior=function(a){function c(){if(a.remove&&0===h.length)aa(b);else if(!d&&!(0===h.length||g)){d=!0;var f=h.shift();b.down.outgoing(f.data,f.origin,function(a){d=!1;f.callback&&e(function(){f.callback(a)},
0);c()})}}var b,h=[],d=!0,f="",g,n=0,v=!1,p=!1;return b={init:function(){y(a)&&(a={});a.maxLength&&(n=a.maxLength,p=!0);a.lazy?v=!0:b.down.init()},callback:function(a){d=!1;var e=b.up;c();e.callback(a)},incoming:function(c,e){if(p){var h=c.indexOf("_"),d=parseInt(c.substring(0,h),10);f+=c.substring(h+1);0===d&&(a.encode&&(f=l(f)),b.up.incoming(f,e),f="")}else b.up.incoming(c,e)},outgoing:function(e,f,d){a.encode&&(e=u(e));var g=[],l;if(p){for(;0!==e.length;)l=e.substring(0,n),e=e.substring(l.length),
g.push(l);for(;l=g.shift();)h.push({data:g.length+"_"+l,origin:f,callback:0===g.length?d:null})}else h.push({data:e,origin:f,callback:d});v?b.down.init():c()},destroy:function(){g=!0;b.down.destroy()}}};f.stack.VerifyBehavior=function(a){function c(){e=Math.random().toString(16).substring(2);b.down.outgoing(e)}var b,e,f;return b={incoming:function(d,g){var l=d.indexOf("_");-1===l?d===e?b.up.callback(!0):f||(f=d,a.initiate||c(),b.down.outgoing(d)):d.substring(0,l)===f&&b.up.incoming(d.substring(l+
1),g)},outgoing:function(a,c,d){b.down.outgoing(e+"_"+a,c,d)},callback:function(b){a.initiate&&c()}}};f.stack.RpcBehavior=function(a,c){function b(a){a.jsonrpc="2.0";f.down.outgoing(g.stringify(a))}function e(a,c){var d=Array.prototype.slice;return function(){var e=arguments.length,f,h={method:c};0<e&&"function"===typeof arguments[e-1]?(1<e&&"function"===typeof arguments[e-2]?(f={success:arguments[e-2],error:arguments[e-1]},h.params=d.call(arguments,0,e-2)):(f={success:arguments[e-1]},h.params=d.call(arguments,
0,e-1)),u[""+ ++l]=f,h.id=l):h.params=d.call(arguments,0);a.namedParams&&1===h.params.length&&(h.params=h.params[0]);b(h)}}function d(a,c,e,f){if(e){var h,g;c?(h=function(a){h=Q;b({id:c,result:a})},g=function(a,e){g=Q;var f={id:c,error:{code:-32099,message:a}};e&&(f.error.data=e);b(f)}):h=g=Q;"[object Array]"!==Object.prototype.toString.call(f)&&(f=[f]);try{var l=e.method.apply(e.scope,f.concat([h,g]));y(l)||h(l)}catch(u){g(u.message)}}else c&&b({id:c,error:{code:-32601,message:"Procedure not found."}})}
var f,g=c.serializer||R(),l=0,u={};return f={incoming:function(a,e){var f=g.parse(a);if(f.method)c.handle?c.handle(f,b):d(f.method,f.id,c.local[f.method],f.params);else{var h=u[f.id];f.error?h.error&&h.error(f.error):h.success&&h.success(f.result);delete u[f.id]}},init:function(){if(c.remote)for(var b in c.remote)c.remote.hasOwnProperty(b)&&(a[b]=e(c.remote[b],b));f.down.init()},destroy:function(){for(var b in c.remote)c.remote.hasOwnProperty(b)&&a.hasOwnProperty(b)&&delete a[b];f.down.destroy()}}};
M.easyXDM=f})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent);var Adfab=Adfab||{},PG={},_plgd_settings=_plgd_settings||{},pl_config={debug:!0,mode:"dev",env:{dev:{url:"localhost/playground-ears/",send:"send.php",connect:"connect.php"},prod:{url:"livedemo.fr/playground/",send:"send.php",connect:"connect.php"}},ns:"Adfab.playground"};var pl={ready:function(d){document.addEventListener?document.addEventListener("DOMContentLoaded",d,!1):window.addEventListener?window.addEventListener("load",d,!1):document.attachEvent?document.attachEvent("onreadystatechange",d):window.attachEvent&&window.attachEvent("onload",d)}};function extend(d,g){var b=Object.prototype.toString,e=b.call({}),l;for(l in g)g[l]&&e==b.call(g[l])?(d[l]=d[l]||{},extend(d[l],g[l])):d[l]=g[l];return d}function addToNamespace(d,g){var b={};b[d]=g;return extend(Adfab,{Playground:b})};pl.ready(function(){cache={window:window,document:document,xmlhttp:window.XMLHttpRequest,protocol:"https:"==document.location.protocol?"https://":"http://",isTouchDevice:!!("ontouchstart"in window)||!!("onmsgesturechange"in window),clickEvent:"ontouchstart"in window||"onmsgesturechange"in window?"touchstart":"click",config:pl_config,settings:_plgd_settings,localstorage:"undefined"==typeof window.localStorage||"undefined"==typeof window.sessionStorage?!1:!0};try{addToNamespace("Cache",cache)}catch(d){throw Error("Cannot extends 'cache' to 'Adfab.playground.Cache'");
}});pl.ready(function(){var d=function(){};d.prototype={pending:{resolve:function(){},reject:function(){}},then:function(b,e){this.pending={resolve:b,reject:e};return this},resolve:function(b){this.pending.resolve(b)},reject:function(b){this.pending.reject(b)}};try{addToNamespace("Promise",d)}catch(g){throw Error("Cannot extends 'Promise' to 'Adfab.playground.Promise'");}});pl.ready(function(){var d={not_null:function(b){return null!=b?"undefined"!=typeof b?""!==b?!0:!1:!1:!1},getValueFromObject:function(b){var e="";PG.Util.not_null(b)&&("object"==typeof b&&void 0!=b.type)&&(void 0!=b.value?e=b.value:void 0!=b.innerHTML&&(e=b.innerHTML));return e},createCookie:function(b,e,d){if(PG.Cache.localstorage)localStorage.setItem(PG.Cache.config.ns+"."+b,e);else{if(d){var g=new Date;g.setTime(g.getTime()+864E5*d);d="; expires\x3d"+g.toGMTString()}else d="";document.cookie=PG.Cache.config.ns+
"."+b+"\x3d"+encodeURIComponent(e)+d+"; path\x3d/"}},readCookie:function(b){if(PG.Cache.localstorage)return localStorage.getItem(PG.Cache.config.ns+"."+b);b=PG.Cache.config.ns+"."+b+"\x3d";for(var e=document.cookie.split(";"),d=0,g="",d=0;d<e.length;d++){for(g=e[d];" "==g.charAt(0);)g=g.substring(1,g.length);if(0==g.indexOf(b))return decodeURIComponent(g.substring(b.length,g.length))}return null},eraseCookie:function(b){if(PG.Cache.localstorage)return localStorage.removeItem(PG.Cache.config.ns+"."+
b);document.cookie=PG.Cache.config.ns+"."+b+"\x3d''; expires\x3dThu, 01 Jan 1970 00:00:01 GMT; path\x3d/"},matchUrl:function(b){return 0<=top.location.href.indexOf(b)?!0:!1},isUrlValid:function(b){return 0<=PG.Cache.config.env[PG.Cache.config.mode].url.indexOf(b)?!1:!0},log:function(b){PG.Cache.config.debug&&(console.log("%c\x3e PLAYGROUND DEBUG ::","color:blue; font-weight:bold;"),console.log(b))},getDomElemntFromItem:function(b){var e=null;"id"===b.selector?e=document.getElementById(b.name):"class"===
b.selector&&(e=document.getElementsByClassName(b.name),null!==e&&0<e.length&&(e=e[0]));return e}};try{addToNamespace("Util",d)}catch(g){throw Error("Cannot extends 'Util' to 'Adfab.playground.Util'");}});pl.ready(function(){var d={env:{},id:null,uid:null,data:{},urls:{current:top.location.href,prev:null},init:function(){PG.User.GenerateUniqueId();PG.User.urls.prev=PG.Util.readCookie("prev-url");var b=PG.Util.readCookie("authent"),e=PG.Util.readCookie("last-sync"),d=(new Date).getTime();if(!PG.Util.not_null(e)||parseInt(e)+86400<d)b=null;PG.Util.not_null(b)?(PG.User.data=JSON.parse(PG.Util.readCookie("authent")),PG.User.checkUser()):PG.User.loadAuthent().then(function(){PG.User.checkUser()})},isLogged:function(){var b;
if(""===PG.User.id||null===PG.User.id)PG.User.id=PG.Util.readCookie("login");b=PG.Util.not_null(PG.User.id)?!0:!1;PG.Util.log("isLogged : "+b);return b},loadAuthent:function(){var b=new PG.Promise;PG.App.call(PG.Cache.config.env[PG.Cache.config.mode].connect).then(function(e){PG.User.data=e;PG.Util.createCookie("last-sync",(new Date).getTime());PG.Util.createCookie("authent",JSON.stringify(e));b.resolve()});return b},checkUser:function(){PG.Util.not_null(PG.Util.readCookie("logout-try"))&&PG.Util.matchUrl(PG.User.data.logout.urls.success)?
PG.User.checkEvidences(PG.User.data.logout.evidences)&&PG.User.logout():PG.Util.not_null(PG.Util.readCookie("login-try"))&&PG.Util.matchUrl(PG.User.data.login.urls.success)?PG.User.checkEvidences(PG.User.data.login.evidences)?PG.User.login(PG.Util.readCookie("login-try")):PG.Util.eraseCookie("login-try"):PG.Util.not_null(PG.Util.readCookie("login"))?PG.User.login(PG.Util.readCookie("login")):PG.User.logout()},login:function(b){PG.Util.log('Login "'+b+'"');null!==b&&(PG.Util.eraseCookie("login-try"),
PG.User.id=b,PG.Util.createCookie("login",b),PG.Util.not_null(PG.User.data.urls),PG.App.send(top.location.href));return PG.User.data.id},logout:function(){PG.Util.log("User is out");PG.Util.eraseCookie("logout-try");PG.Util.eraseCookie("login");PG.User.id=null;PG.App.send(top.location.href)},GenerateUniqueId:function(){var b=PG.Util.readCookie("unique-id");PG.Util.not_null(b)||(b="body_"+(new Date).getTime(),PG.Util.createCookie("unique-id",b));return PG.User.uid=b},checkEvidences:function(b){var e=
null,d=!0,g;for(g in b)"id"===b[g].selector?e=document.getElementById(b[g].name):"class"===PG.User.data.evidences[g].selector&&(e=document.getElementsByClassName(b[g].name)),null===e&&(d=!1);return d},quit:function(){var b,e="";PG.Util.createCookie("prev-url",top.location.href);if(PG.Util.not_null(PG.User.data.login)&&PG.Util.not_null(PG.User.data.logout))if(!PG.User.isLogged()&&PG.Util.matchUrl(PG.User.data.login.urls.page)){for(b in PG.User.data.login.items)"object"===typeof PG.User.data.login.items[b]&&
(e+=""!==e?":":"",e+=PG.Util.getValueFromObject(PG.Util.getDomElemntFromItem(PG.User.data.login.items[b])));PG.Util.createCookie("login-try",e)}else PG.Util.matchUrl(PG.User.data.logout.urls.page)&&PG.Util.createCookie("logout-try","logout")}};try{addToNamespace("User",d)}catch(g){throw Error("Cannot extends 'User' to 'Adfab.playground.User'");}});pl.ready(function(){function d(){return this}d.prototype.init=function(){PG=Adfab.Playground;PG.Util.not_null(PG.Cache.settings)&&PG.Util.not_null(PG.Cache.settings.apiKey)?(PG.User.env=_plgd_settings,PG.Util.log("APIKEY FOUND \x3d "+PG.Cache.settings.apiKey),PG.App.easyXDM(),PG.App.bindEvent(),PG.User.init()):PG.Util.log("NOT APIKEY FOUND")};d.prototype.bindEvent=function(){var b,d,g;b=PG.Cache.xmlhttp.prototype.open;d=PG.Cache.xmlhttp.prototype.send;PG.Cache.xmlhttp.prototype.open=function(d,l){d||
(d="");l||(l="");b.apply(this,arguments);g=d;"get"==d.toLowerCase()&&l.split("?")};PG.Cache.xmlhttp.prototype.send=function(b,e){b||(b="");e||(e="");d.apply(this,arguments);g.toLowerCase()};PG.Cache.document.onreadystatechange=function(b){PG.Util.not_null(b.data)&&""!=b.data&&PG.App.send(b.data)};PG.Cache.window.onbeforeunload=function(b){PG.User.quit();return null}};d.prototype.easyXDM=function(){PG.App.rpc=new easyXDM.Rpc({local:PG.Cache.protocol+PG.Cache.config.env[PG.Cache.config.mode].url+"easyXDM/name.html",
swf:PG.Cache.protocol+PG.Cache.config.env[PG.Cache.config.mode].url+"easyXDM/easyxdm.swf",remote:PG.Cache.protocol+PG.Cache.config.env[PG.Cache.config.mode].url+"index.html"},{remote:{request:{}}})};d.prototype.send=function(b){var d=PG.Util.isUrlValid(b);d&&(b=PG.Cache.protocol+PG.Cache.config.env[PG.Cache.config.mode].url+PG.Cache.config.env[PG.Cache.config.mode].send+"?apiKey\x3d"+PG.Cache.settings.apiKey+"\x26url\x3d"+b+"\x26uid\x3d"+PG.User.uid,PG.Util.log("send url : "+b),PG.User.isLogged()&&
(b+="\x26login\x3d"+PG.User.id),PG.App.rpc.request({url:b},function(b){PG.Util.log(b)},function(b){throw"Api Error, code : "+b.code+", msg : "+b.message;}));return d};d.prototype.call=function(b){var d=new PG.Promise;PG.Util.log("call service : "+b);PG.App.rpc.request({url:PG.Cache.protocol+PG.Cache.config.env[PG.Cache.config.mode].url+b+"?apiKey\x3d"+PG.Cache.settings.apiKey},function(b){d.resolve(easyXDM.getJSONObject().parse(b.data))},function(b){throw"Api Error, code : "+b.code+", msg : "+b.message;
});return d};var g=new d;try{addToNamespace("App",g)}catch(b){throw Error("Cannot extends 'app' to 'Adfab.playground.App'");}g.init()});