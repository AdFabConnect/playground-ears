(function(d, g, b, h, l, A) {
  function u(a, c) {
    var k = typeof a[c];
    return"function" == k || !!("object" == k && a[c]) || "unknown" == k
  }
  function S() {
    if(!x(navigator.plugins) && "object" == typeof navigator.plugins["Shockwave Flash"]) {
      var a = navigator.plugins["Shockwave Flash"].description;
      a && (!x(navigator.mimeTypes) && navigator.mimeTypes["application/x-shockwave-flash"] && navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin) && (B = a.match(/\d+/g))
    }
    if(!B) {
      var c;
      try {
        c = new ActiveXObject("ShockwaveFlash.ShockwaveFlash"), B = Array.prototype.slice.call(c.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/), 1)
      }catch(k) {
      }
    }
    if(!B) {
      return!1
    }
    a = parseInt(B[0], 10);
    c = parseInt(B[1], 10);
    P = 9 < a && 0 < c;
    return!0
  }
  function I() {
    if(!C) {
      C = !0;
      for(var a = 0;a < J.length;a++) {
        J[a]()
      }
      J.length = 0
    }
  }
  function D(a, c) {
    C ? a.call(c) : J.push(function() {
      a.call(c)
    })
  }
  function Z() {
    var a = parent;
    if("" !== G) {
      for(var c = 0, k = G.split(".");c < k.length;c++) {
        a = a[k[c]]
      }
    }
    return a.easyXDM
  }
  function r(a) {
    var c = a.toLowerCase().match(K);
    a = c[2];
    var k = c[3], c = c[4] || "";
    if("http:" == a && ":80" == c || "https:" == a && ":443" == c) {
      c = ""
    }
    return a + "//" + k + c
  }
  function H(a) {
    a = a.replace($, "$1/");
    if(!a.match(/^(http||https):\/\//)) {
      var c = "/" === a.substring(0, 1) ? "" : b.pathname;
      "/" !== c.substring(c.length - 1) && (c = c.substring(0, c.lastIndexOf("/") + 1));
      a = b.protocol + "//" + b.host + c + a
    }
    for(;T.test(a);) {
      a = a.replace(T, "")
    }
    return a
  }
  function E(a, c) {
    var k = "", f = a.indexOf("#");
    -1 !== f && (k = a.substring(f), a = a.substring(0, f));
    var f = [], b;
    for(b in c) {
      c.hasOwnProperty(b) && f.push(b + "\x3d" + A(c[b]))
    }
    return a + (U ? "#" : -1 == a.indexOf("?") ? "?" : "\x26") + f.join("\x26") + k
  }
  function x(a) {
    return"undefined" === typeof a
  }
  function s(a, c, k) {
    var f, b;
    for(b in c) {
      c.hasOwnProperty(b) && (b in a ? (f = c[b], "object" === typeof f ? s(a[b], f, k) : k || (a[b] = c[b])) : a[b] = c[b])
    }
    return a
  }
  function z(a) {
    if(x(L)) {
      var c = g.body.appendChild(g.createElement("form")), k = c.appendChild(g.createElement("input"));
      k.name = v + "TEST" + V;
      L = k !== c.elements[k.name];
      g.body.removeChild(c)
    }
    L ? c = g.createElement('\x3ciframe name\x3d"' + a.props.name + '"/\x3e') : (c = g.createElement("IFRAME"), c.name = a.props.name);
    c.id = c.name = a.props.name;
    delete a.props.name;
    "string" == typeof a.container && (a.container = g.getElementById(a.container));
    a.container || (s(c.style, {position:"absolute", top:"-2000px", left:"0px"}), a.container = g.body);
    k = a.props.src;
    a.props.src = "javascript:false";
    s(c, a.props);
    c.border = c.frameBorder = 0;
    c.allowTransparency = !0;
    a.container.appendChild(c);
    a.onLoad && w(c, "load", a.onLoad);
    if(a.usePost) {
      var b = a.container.appendChild(g.createElement("form")), h;
      b.target = c.name;
      b.action = k;
      b.method = "POST";
      if("object" === typeof a.usePost) {
        for(var m in a.usePost) {
          a.usePost.hasOwnProperty(m) && (L ? h = g.createElement('\x3cinput name\x3d"' + m + '"/\x3e') : (h = g.createElement("INPUT"), h.name = m), h.value = a.usePost[m], b.appendChild(h))
        }
      }
      b.submit();
      b.parentNode.removeChild(b)
    }else {
      c.src = k
    }
    a.props.src = k;
    return c
  }
  function W(a) {
    var c = a.protocol, k;
    a.isHost = a.isHost || x(t.xdm_p);
    U = a.hash || !1;
    a.props || (a.props = {});
    if(a.isHost) {
      a.remote = H(a.remote), a.channel = a.channel || "default" + V++, a.secret = Math.random().toString(16).substring(2), x(c) && (c = r(b.href) == r(a.remote) ? "4" : u(d, "postMessage") || u(g, "postMessage") ? "1" : a.swf && u(d, "ActiveXObject") && S() ? "6" : "Gecko" === navigator.product && "frameElement" in d && -1 == navigator.userAgent.indexOf("WebKit") ? "5" : a.remoteHelper ? "2" : "0")
    }else {
      a.channel = t.xdm_c.replace(/["'<>\\]/g, "");
      a.secret = t.xdm_s;
      a.remote = t.xdm_e.replace(/["'<>\\]/g, "");
      var c = t.xdm_p, f;
      if(f = a.acl) {
        a: {
          f = a.acl;
          var h = a.remote;
          "string" == typeof f && (f = [f]);
          for(var m, q = f.length;q--;) {
            if(m = f[q], m = RegExp("^" == m.substr(0, 1) ? m : "^" + m.replace(/(\*)/g, ".$1").replace(/\?/g, ".") + "$"), m.test(h)) {
              f = !0;
              break a
            }
          }
          f = !1
        }
        f = !f
      }
      if(f) {
        throw Error("Access denied for " + a.remote);
      }
    }
    a.protocol = c;
    switch(c) {
      case "0":
        s(a, {interval:100, delay:2E3, useResize:!0, useParent:!1, usePolling:!1}, !0);
        if(a.isHost) {
          if(!a.local) {
            c = b.protocol + "//" + b.host;
            k = g.body.getElementsByTagName("img");
            for(h = k.length;h--;) {
              if(f = k[h], f.src.substring(0, c.length) === c) {
                a.local = f.src;
                break
              }
            }
            a.local || (a.local = d)
          }
          c = {xdm_c:a.channel, xdm_p:0};
          a.local === d ? (a.usePolling = !0, a.useParent = !0, a.local = b.protocol + "//" + b.host + b.pathname + b.search, c.xdm_e = a.local, c.xdm_pa = 1) : c.xdm_e = H(a.local);
          a.container && (a.useResize = !1, c.xdm_po = 1);
          a.remote = E(a.remote, c)
        }else {
          s(a, {channel:t.xdm_c, remote:t.xdm_e, useParent:!x(t.xdm_pa), usePolling:!x(t.xdm_po), useResize:a.useParent ? !1 : a.useResize})
        }
        k = [new e.stack.HashTransport(a), new e.stack.ReliableBehavior({}), new e.stack.QueueBehavior({encode:!0, maxLength:4E3 - a.remote.length}), new e.stack.VerifyBehavior({initiate:a.isHost})];
        break;
      case "1":
        k = [new e.stack.PostMessageTransport(a)];
        break;
      case "2":
        a.remoteHelper = H(a.remoteHelper);
        k = [new e.stack.NameTransport(a), new e.stack.QueueBehavior, new e.stack.VerifyBehavior({initiate:a.isHost})];
        break;
      case "3":
        k = [new e.stack.NixTransport(a)];
        break;
      case "4":
        k = [new e.stack.SameOriginTransport(a)];
        break;
      case "5":
        k = [new e.stack.FrameElementTransport(a)];
        break;
      case "6":
        B || S(), k = [new e.stack.FlashTransport(a)]
    }
    k.push(new e.stack.QueueBehavior({lazy:a.lazy, remove:!0}));
    return k
  }
  function X(a) {
    for(var c, k = {incoming:function(a, c) {
      this.up.incoming(a, c)
    }, outgoing:function(a, c) {
      this.down.outgoing(a, c)
    }, callback:function(a) {
      this.up.callback(a)
    }, init:function() {
      this.down.init()
    }, destroy:function() {
      this.down.destroy()
    }}, b = 0, h = a.length;b < h;b++) {
      c = a[b], s(c, k, !0), 0 !== b && (c.down = a[b - 1]), b !== h - 1 && (c.up = a[b + 1])
    }
    return c
  }
  function aa(a) {
    a.up.down = a.down;
    a.down.up = a.up;
    a.up = a.down = null
  }
  var M = this, V = Math.floor(1E4 * Math.random()), Q = Function.prototype, K = /^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/, T = /[\-\w]+\/\.\.\//, $ = /([^:])\/\//g, G = "", e = {}, ba = d.easyXDM, v = "easyXDM_", L, U = !1, B, P, w, F;
  if(u(d, "addEventListener")) {
    w = function(a, c, b) {
      a.addEventListener(c, b, !1)
    }, F = function(a, c, b) {
      a.removeEventListener(c, b, !1)
    }
  }else {
    if(u(d, "attachEvent")) {
      w = function(a, c, b) {
        a.attachEvent("on" + c, b)
      }, F = function(a, c, b) {
        a.detachEvent("on" + c, b)
      }
    }else {
      throw Error("Browser not supported");
    }
  }
  var C = !1, J = [], N;
  "readyState" in g ? (N = g.readyState, C = "complete" == N || ~navigator.userAgent.indexOf("AppleWebKit/") && ("loaded" == N || "interactive" == N)) : C = !!g.body;
  if(!C) {
    if(u(d, "addEventListener")) {
      w(g, "DOMContentLoaded", I)
    }else {
      if(w(g, "readystatechange", function() {
        "complete" == g.readyState && I()
      }), g.documentElement.doScroll && d === top) {
        var Y = function() {
          if(!C) {
            try {
              g.documentElement.doScroll("left")
            }catch(a) {
              h(Y, 1);
              return
            }
            I()
          }
        };
        Y()
      }
    }
    w(d, "load", I)
  }
  var t = function(a) {
    a = a.substring(1).split("\x26");
    for(var c = {}, b, f = a.length;f--;) {
      b = a[f].split("\x3d"), c[b[0]] = l(b[1])
    }
    return c
  }(/xdm_e=/.test(b.search) ? b.search : b.hash), R = function() {
    var a = {}, c = {a:[1, 2, 3]};
    if("undefined" != typeof JSON && "function" === typeof JSON.stringify && '{"a":[1,2,3]}' === JSON.stringify(c).replace(/\s/g, "")) {
      return JSON
    }
    Object.toJSON && '{"a":[1,2,3]}' === Object.toJSON(c).replace(/\s/g, "") && (a.stringify = Object.toJSON);
    "function" === typeof String.prototype.evalJSON && (c = '{"a":[1,2,3]}'.evalJSON(), c.a && (3 === c.a.length && 3 === c.a[2]) && (a.parse = function(a) {
      return a.evalJSON()
    }));
    return a.stringify && a.parse ? (R = function() {
      return a
    }, a) : null
  };
  s(e, {version:"2.4.17.1", query:t, stack:{}, apply:s, getJSONObject:R, whenReady:D, noConflict:function(a) {
    d.easyXDM = ba;
    (G = a) && (v = "easyXDM_" + G.replace(".", "_") + "_");
    return e
  }});
  e.DomHelper = {on:w, un:F, requiresJSON:function(a) {
    "object" == typeof d.JSON && d.JSON || g.write('\x3cscript type\x3d"text/javascript" src\x3d"' + a + '"\x3e\x3c/script\x3e')
  }};
  (function() {
    var a = {};
    e.Fn = {set:function(c, b) {
      a[c] = b
    }, get:function(c, b) {
      var f = a[c];
      b && delete a[c];
      return f
    }}
  })();
  e.Socket = function(a) {
    var c = X(W(a).concat([{incoming:function(c, b) {
      a.onMessage(c, b)
    }, callback:function(c) {
      if(a.onReady) {
        a.onReady(c)
      }
    }}])), b = r(a.remote);
    this.origin = r(a.remote);
    this.destroy = function() {
      c.destroy()
    };
    this.postMessage = function(a) {
      c.outgoing(a, b)
    };
    c.init()
  };
  e.Rpc = function(a, c) {
    if(c.local) {
      for(var b in c.local) {
        if(c.local.hasOwnProperty(b)) {
          var f = c.local[b];
          "function" === typeof f && (c.local[b] = {method:f})
        }
      }
    }
    var h = X(W(a).concat([new e.stack.RpcBehavior(this, c), {callback:function(c) {
      if(a.onReady) {
        a.onReady(c)
      }
    }}]));
    this.origin = r(a.remote);
    this.destroy = function() {
      h.destroy()
    };
    h.init()
  };
  e.stack.SameOriginTransport = function(a) {
    var c, k, f, d;
    return c = {outgoing:function(a, c, b) {
      f(a);
      b && b()
    }, destroy:function() {
      k && (k.parentNode.removeChild(k), k = null)
    }, onDOMReady:function() {
      d = r(a.remote);
      a.isHost ? (s(a.props, {src:E(a.remote, {xdm_e:b.protocol + "//" + b.host + b.pathname, xdm_c:a.channel, xdm_p:4}), name:v + a.channel + "_provider"}), k = z(a), e.Fn.set(a.channel, function(a) {
        f = a;
        h(function() {
          c.up.callback(!0)
        }, 0);
        return function(a) {
          c.up.incoming(a, d)
        }
      })) : (f = Z().Fn.get(a.channel, !0)(function(a) {
        c.up.incoming(a, d)
      }), h(function() {
        c.up.callback(!0)
      }, 0))
    }, init:function() {
      D(c.onDOMReady, c)
    }}
  };
  e.stack.FlashTransport = function(a) {
    function c(a, c) {
      h(function() {
        f.up.incoming(a, m)
      }, 0)
    }
    function k(c) {
      var b = a.swf + "?host\x3d" + a.isHost, k = "easyXDM_swf_" + Math.floor(1E4 * Math.random());
      e.Fn.set("flash_loaded" + c.replace(/[\-.]/g, "_"), function() {
        e.stack.FlashTransport[c].swf = q = n.firstChild;
        for(var a = e.stack.FlashTransport[c].queue, b = 0;b < a.length;b++) {
          a[b]()
        }
        a.length = 0
      });
      a.swfContainer ? n = "string" == typeof a.swfContainer ? g.getElementById(a.swfContainer) : a.swfContainer : (n = g.createElement("div"), s(n.style, P && a.swfNoThrottle ? {height:"20px", width:"20px", position:"fixed", right:0, top:0} : {height:"1px", width:"1px", position:"absolute", overflow:"hidden", right:0, top:0}), g.body.appendChild(n));
      var f = "callback\x3dflash_loaded" + c.replace(/[\-.]/g, "_") + "\x26proto\x3d" + M.location.protocol + "\x26domain\x3d" + M.location.href.match(K)[3] + "\x26port\x3d" + (M.location.href.match(K)[4] || "") + "\x26ns\x3d" + G;
      n.innerHTML = "\x3cobject height\x3d'20' width\x3d'20' type\x3d'application/x-shockwave-flash' id\x3d'" + k + "' data\x3d'" + b + "'\x3e\x3cparam name\x3d'allowScriptAccess' value\x3d'always'\x3e\x3c/param\x3e\x3cparam name\x3d'wmode' value\x3d'transparent'\x3e\x3cparam name\x3d'movie' value\x3d'" + b + "'\x3e\x3c/param\x3e\x3cparam name\x3d'flashvars' value\x3d'" + f + "'\x3e\x3c/param\x3e\x3cembed type\x3d'application/x-shockwave-flash' FlashVars\x3d'" + f + "' allowScriptAccess\x3d'always' wmode\x3d'transparent' src\x3d'" + 
      b + "' height\x3d'1' width\x3d'1'\x3e\x3c/embed\x3e\x3c/object\x3e"
    }
    var f, d, m, q, n;
    return f = {outgoing:function(c, b, k) {
      q.postMessage(a.channel, c.toString());
      k && k()
    }, destroy:function() {
      try {
        q.destroyChannel(a.channel)
      }catch(c) {
      }
      q = null;
      d && (d.parentNode.removeChild(d), d = null)
    }, onDOMReady:function() {
      m = a.remote;
      e.Fn.set("flash_" + a.channel + "_init", function() {
        h(function() {
          f.up.callback(!0)
        })
      });
      e.Fn.set("flash_" + a.channel + "_onMessage", c);
      a.swf = H(a.swf);
      var n = a.swf.match(K)[3], p = function() {
        e.stack.FlashTransport[n].init = !0;
        q = e.stack.FlashTransport[n].swf;
        q.createChannel(a.channel, a.secret, r(a.remote), a.isHost);
        a.isHost && (P && a.swfNoThrottle && s(a.props, {position:"fixed", right:0, top:0, height:"20px", width:"20px"}), s(a.props, {src:E(a.remote, {xdm_e:r(b.href), xdm_c:a.channel, xdm_p:6, xdm_s:a.secret}), name:v + a.channel + "_provider"}), d = z(a))
      };
      e.stack.FlashTransport[n] && e.stack.FlashTransport[n].init ? p() : e.stack.FlashTransport[n] ? e.stack.FlashTransport[n].queue.push(p) : (e.stack.FlashTransport[n] = {queue:[p]}, k(n))
    }, init:function() {
      D(f.onDOMReady, f)
    }}
  };
  e.stack.PostMessageTransport = function(a) {
    function c(c) {
      var f;
      if(c.origin) {
        f = r(c.origin)
      }else {
        if(c.uri) {
          f = r(c.uri)
        }else {
          if(c.domain) {
            f = b.protocol + "//" + c.domain
          }else {
            throw"Unable to retrieve the origin of the event";
          }
        }
      }
      f == m && c.data.substring(0, a.channel.length + 1) == a.channel + " " && k.up.incoming(c.data.substring(a.channel.length + 1), f)
    }
    var k, f, e, m;
    return k = {outgoing:function(c, b, k) {
      e.postMessage(a.channel + " " + c, b || m);
      k && k()
    }, destroy:function() {
      F(d, "message", c);
      f && (e = null, f.parentNode.removeChild(f), f = null)
    }, onDOMReady:function() {
      m = r(a.remote);
      if(a.isHost) {
        var q = function(b) {
          b.data == a.channel + "-ready" && (e = "postMessage" in f.contentWindow ? f.contentWindow : f.contentWindow.document, F(d, "message", q), w(d, "message", c), h(function() {
            k.up.callback(!0)
          }, 0))
        };
        w(d, "message", q);
        s(a.props, {src:E(a.remote, {xdm_e:r(b.href), xdm_c:a.channel, xdm_p:1}), name:v + a.channel + "_provider"});
        f = z(a)
      }else {
        w(d, "message", c), e = "postMessage" in d.parent ? d.parent : d.parent.document, e.postMessage(a.channel + "-ready", m), h(function() {
          k.up.callback(!0)
        }, 0)
      }
    }, init:function() {
      D(k.onDOMReady, k)
    }}
  };
  e.stack.FrameElementTransport = function(a) {
    var c, k, f, e;
    return c = {outgoing:function(a, c, b) {
      f.call(this, a);
      b && b()
    }, destroy:function() {
      k && (k.parentNode.removeChild(k), k = null)
    }, onDOMReady:function() {
      e = r(a.remote);
      a.isHost ? (s(a.props, {src:E(a.remote, {xdm_e:r(b.href), xdm_c:a.channel, xdm_p:5}), name:v + a.channel + "_provider"}), k = z(a), k.fn = function(a) {
        delete k.fn;
        f = a;
        h(function() {
          c.up.callback(!0)
        }, 0);
        return function(a) {
          c.up.incoming(a, e)
        }
      }) : (g.referrer && r(g.referrer) != t.xdm_e && (d.top.location = t.xdm_e), f = d.frameElement.fn(function(a) {
        c.up.incoming(a, e)
      }), c.up.callback(!0))
    }, init:function() {
      D(c.onDOMReady, c)
    }}
  };
  e.stack.NameTransport = function(a) {
    function c(c) {
      n.contentWindow.sendMessage(c, a.remoteHelper + (q ? "#_3" : "#_2") + a.channel)
    }
    function b() {
      q ? (2 === ++p || !q) && m.up.callback(!0) : (c("ready"), m.up.callback(!0))
    }
    function f(a) {
      m.up.incoming(a, l)
    }
    function d() {
      y && h(function() {
        y(!0)
      }, 0)
    }
    var m, q, n, g, p, y, l, O;
    return m = {outgoing:function(a, b, k) {
      y = k;
      c(a)
    }, destroy:function() {
      n.parentNode.removeChild(n);
      n = null;
      q && (g.parentNode.removeChild(g), g = null)
    }, onDOMReady:function() {
      q = a.isHost;
      p = 0;
      l = r(a.remote);
      a.local = H(a.local);
      q ? (e.Fn.set(a.channel, function(c) {
        q && "ready" === c && (e.Fn.set(a.channel, f), b())
      }), O = E(a.remote, {xdm_e:a.local, xdm_c:a.channel, xdm_p:2}), s(a.props, {src:O + "#" + a.channel, name:v + a.channel + "_provider"}), g = z(a)) : (a.remoteHelper = a.remote, e.Fn.set(a.channel, f));
      var c = function() {
        var f = n || this;
        F(f, "load", c);
        e.Fn.set(a.channel + "_load", d);
        (function da() {
          "function" == typeof f.contentWindow.sendMessage ? b() : h(da, 50)
        })()
      };
      n = z({props:{src:a.local + "#_4" + a.channel}, onLoad:c})
    }, init:function() {
      D(m.onDOMReady, m)
    }}
  };
  e.stack.HashTransport = function(a) {
    function c() {
      if(l) {
        var a = l.location.href, c = "", f = a.indexOf("#");
        -1 != f && (c = a.substring(f));
        c && c != g && (g = c, b.up.incoming(g.substring(g.indexOf("_") + 1), A))
      }
    }
    var b, f, e, m, g, n, l, p, y, A;
    return b = {outgoing:function(c, b) {
      if(p) {
        var k = a.remote + "#" + n++ + "_" + c;
        (f || !y ? p.contentWindow : p).location = k
      }
    }, destroy:function() {
      d.clearInterval(e);
      (f || !y) && p.parentNode.removeChild(p);
      p = null
    }, onDOMReady:function() {
      f = a.isHost;
      m = a.interval;
      g = "#" + a.channel;
      n = 0;
      y = a.useParent;
      A = r(a.remote);
      if(f) {
        s(a.props, {src:a.remote, name:v + a.channel + "_provider"});
        if(y) {
          a.onLoad = function() {
            l = d;
            e = setInterval(c, m);
            b.up.callback(!0)
          }
        }else {
          var O = 0, u = a.delay / 50;
          (function ca() {
            if(++O > u) {
              throw Error("Unable to reference listenerwindow");
            }
            try {
              l = p.contentWindow.frames[v + a.channel + "_consumer"]
            }catch(f) {
            }
            l ? (e = setInterval(c, m), b.up.callback(!0)) : h(ca, 50)
          })()
        }
        p = z(a)
      }else {
        l = d, e = setInterval(c, m), y ? (p = parent, b.up.callback(!0)) : (s(a, {props:{src:a.remote + "#" + a.channel + new Date, name:v + a.channel + "_consumer"}, onLoad:function() {
          b.up.callback(!0)
        }}), p = z(a))
      }
    }, init:function() {
      D(b.onDOMReady, b)
    }}
  };
  e.stack.ReliableBehavior = function(a) {
    var c, b, f = 0, h = 0, d = "";
    return c = {incoming:function(a, e) {
      var g = a.indexOf("_"), l = a.substring(0, g).split(",");
      a = a.substring(g + 1);
      l[0] == f && (d = "", b && (b(!0), b = null));
      0 < a.length && (c.down.outgoing(l[1] + "," + f + "_" + d, e), h != l[1] && (h = l[1], c.up.incoming(a, e)))
    }, outgoing:function(a, e, g) {
      d = a;
      b = g;
      c.down.outgoing(h + "," + ++f + "_" + a, e)
    }}
  };
  e.stack.QueueBehavior = function(a) {
    function c() {
      if(a.remove && 0 === f.length) {
        aa(b)
      }else {
        if(!d && !(0 === f.length || g)) {
          d = !0;
          var e = f.shift();
          b.down.outgoing(e.data, e.origin, function(a) {
            d = !1;
            e.callback && h(function() {
              e.callback(a)
            }, 0);
            c()
          })
        }
      }
    }
    var b, f = [], d = !0, e = "", g, n = 0, u = !1, p = !1;
    return b = {init:function() {
      x(a) && (a = {});
      a.maxLength && (n = a.maxLength, p = !0);
      a.lazy ? u = !0 : b.down.init()
    }, callback:function(a) {
      d = !1;
      var f = b.up;
      c();
      f.callback(a)
    }, incoming:function(c, f) {
      if(p) {
        var h = c.indexOf("_"), d = parseInt(c.substring(0, h), 10);
        e += c.substring(h + 1);
        0 === d && (a.encode && (e = l(e)), b.up.incoming(e, f), e = "")
      }else {
        b.up.incoming(c, f)
      }
    }, outgoing:function(h, e, d) {
      a.encode && (h = A(h));
      var g = [], l;
      if(p) {
        for(;0 !== h.length;) {
          l = h.substring(0, n), h = h.substring(l.length), g.push(l)
        }
        for(;l = g.shift();) {
          f.push({data:g.length + "_" + l, origin:e, callback:0 === g.length ? d : null})
        }
      }else {
        f.push({data:h, origin:e, callback:d})
      }
      u ? b.down.init() : c()
    }, destroy:function() {
      g = !0;
      b.down.destroy()
    }}
  };
  e.stack.VerifyBehavior = function(a) {
    function c() {
      f = Math.random().toString(16).substring(2);
      b.down.outgoing(f)
    }
    var b, f, h;
    return b = {incoming:function(e, d) {
      var g = e.indexOf("_");
      -1 === g ? e === f ? b.up.callback(!0) : h || (h = e, a.initiate || c(), b.down.outgoing(e)) : e.substring(0, g) === h && b.up.incoming(e.substring(g + 1), d)
    }, outgoing:function(a, c, h) {
      b.down.outgoing(f + "_" + a, c, h)
    }, callback:function(b) {
      a.initiate && c()
    }}
  };
  e.stack.RpcBehavior = function(a, c) {
    function b(a) {
      a.jsonrpc = "2.0";
      e.down.outgoing(d.stringify(a))
    }
    function f(a, c) {
      var f = Array.prototype.slice;
      return function() {
        var h = arguments.length, e, d = {method:c};
        0 < h && "function" === typeof arguments[h - 1] ? (1 < h && "function" === typeof arguments[h - 2] ? (e = {success:arguments[h - 2], error:arguments[h - 1]}, d.params = f.call(arguments, 0, h - 2)) : (e = {success:arguments[h - 1]}, d.params = f.call(arguments, 0, h - 1)), l["" + ++g] = e, d.id = g) : d.params = f.call(arguments, 0);
        a.namedParams && 1 === d.params.length && (d.params = d.params[0]);
        b(d)
      }
    }
    function h(a, c, f, e) {
      if(f) {
        var d, g;
        c ? (d = function(a) {
          d = Q;
          b({id:c, result:a})
        }, g = function(a, h) {
          g = Q;
          var f = {id:c, error:{code:-32099, message:a}};
          h && (f.error.data = h);
          b(f)
        }) : d = g = Q;
        "[object Array]" !== Object.prototype.toString.call(e) && (e = [e]);
        try {
          var l = f.method.apply(f.scope, e.concat([d, g]));
          x(l) || d(l)
        }catch(A) {
          g(A.message)
        }
      }else {
        c && b({id:c, error:{code:-32601, message:"Procedure not found."}})
      }
    }
    var e, d = c.serializer || R(), g = 0, l = {};
    return e = {incoming:function(a, f) {
      var e = d.parse(a);
      if(e.method) {
        c.handle ? c.handle(e, b) : h(e.method, e.id, c.local[e.method], e.params)
      }else {
        var g = l[e.id];
        e.error ? g.error && g.error(e.error) : g.success && g.success(e.result);
        delete l[e.id]
      }
    }, init:function() {
      if(c.remote) {
        for(var b in c.remote) {
          c.remote.hasOwnProperty(b) && (a[b] = f(c.remote[b], b))
        }
      }
      e.down.init()
    }, destroy:function() {
      for(var b in c.remote) {
        c.remote.hasOwnProperty(b) && a.hasOwnProperty(b) && delete a[b]
      }
      e.down.destroy()
    }}
  };
  M.easyXDM = e
})(window, document, location, window.setTimeout, decodeURIComponent, encodeURIComponent);
var Adfab = Adfab || {}, NS = {}, _plgd_settings = _plgd_settings || {}, pl_config = {debug:!0, url:"localhost/plaground-ears/", send:"send.php", connect:"connect.php", ns:"Adfab.playground"};
var pl = {ready:function(d) {
  document.addEventListener ? document.addEventListener("DOMContentLoaded", d, !1) : window.addEventListener ? window.addEventListener("load", d, !1) : document.attachEvent ? document.attachEvent("onreadystatechange", d) : window.attachEvent && window.attachEvent("onload", d)
}};
function extend(d, g) {
  var b = Object.prototype.toString, h = b.call({}), l;
  for(l in g) {
    g[l] && h == b.call(g[l]) ? (d[l] = d[l] || {}, extend(d[l], g[l])) : d[l] = g[l]
  }
  return d
}
function addToNamespace(d, g) {
  var b = {};
  b[d] = g;
  return extend(Adfab, {Playground:b})
}
;pl.ready(function() {
  cache = {window:window, document:document, xmlhttp:window.XMLHttpRequest, protocol:"https:" == document.location.protocol ? "https://" : "http://", isTouchDevice:!!("ontouchstart" in window) || !!("onmsgesturechange" in window), clickEvent:"ontouchstart" in window || "onmsgesturechange" in window ? "touchstart" : "click", config:pl_config, settings:_plgd_settings, localstorage:"undefined" == typeof window.localStorage || "undefined" == typeof window.sessionStorage ? !1 : !0};
  try {
    addToNamespace("Cache", cache)
  }catch(d) {
    throw Error("Cannot extends 'cache' to 'Adfab.playground.Cache'");
  }
});
pl.ready(function() {
  var d = function() {
  };
  d.prototype = {pending:{resolve:function() {
  }, reject:function() {
  }}, then:function(b, h) {
    this.pending = {resolve:b, reject:h};
    return this
  }, resolve:function(b) {
    this.pending.resolve(b)
  }, reject:function(b) {
    this.pending.reject(b)
  }};
  try {
    addToNamespace("Promise", d)
  }catch(g) {
    throw Error("Cannot extends 'Promise' to 'Adfab.playground.Promise'");
  }
});
pl.ready(function() {
  var d = {not_null:function(b) {
    return null != b ? "undefined" != typeof b ? "" !== b ? !0 : !1 : !1 : !1
  }, getValueFromObject:function(b) {
    var h = "";
    NS.Util.not_null(b) && ("object" == typeof b && void 0 != b.type) && (void 0 != b.value ? h = b.value : void 0 != b.innerHTML && (h = b.innerHTML));
    return h
  }, createCookie:function(b, h, d) {
    if(NS.Cache.localstorage) {
      localStorage.setItem(NS.Cache.config.ns + "." + b, h)
    }else {
      if(d) {
        var g = new Date;
        g.setTime(g.getTime() + 864E5 * d);
        d = "; expires\x3d" + g.toGMTString()
      }else {
        d = ""
      }
      document.cookie = NS.Cache.config.ns + "." + b + "\x3d" + encodeURIComponent(h) + d + "; path\x3d/"
    }
  }, readCookie:function(b) {
    if(NS.Cache.localstorage) {
      return localStorage.getItem(NS.Cache.config.ns + "." + b)
    }
    b = NS.Cache.config.ns + "." + b + "\x3d";
    for(var h = document.cookie.split(";"), d = 0, g = "", d = 0;d < h.length;d++) {
      for(g = h[d];" " == g.charAt(0);) {
        g = g.substring(1, g.length)
      }
      if(0 == g.indexOf(b)) {
        return decodeURIComponent(g.substring(b.length, g.length))
      }
    }
    return null
  }, eraseCookie:function(b) {
    if(NS.Cache.localstorage) {
      return localStorage.removeItem(NS.Cache.config.ns + "." + b)
    }
    document.cookie = NS.Cache.config.ns + "." + b + "\x3d''; expires\x3dThu, 01 Jan 1970 00:00:01 GMT; path\x3d/"
  }, matchUrl:function(b) {
    return 0 <= top.location.href.indexOf(b) ? !0 : !1
  }, isUrlValid:function(b) {
    return 0 <= NS.Cache.config.url.indexOf(b) ? !1 : !0
  }, log:function(b) {
    NS.Cache.config.debug && (console.log("%c\x3e PLAYGROUND DEBUG ::", "color:blue; font-weight:bold;"), console.log(b))
  }, getDomElemntFromItem:function(b) {
    var h = null;
    "id" === b.selector ? h = document.getElementById(b.name) : "class" === b.selector && (h = document.getElementsByClassName(b.name), null !== h && 0 < h.length && (h = h[0]));
    return h
  }};
  try {
    addToNamespace("Util", d)
  }catch(g) {
    throw Error("Cannot extends 'Util' to 'Adfab.playground.Util'");
  }
});
pl.ready(function() {
  var d = {env:{}, id:null, uid:null, data:{}, urls:{current:top.location.href, prev:null}, init:function() {
    NS.User.GenerateUniqueId();
    NS.User.urls.prev = NS.Util.readCookie("prev-url");
    var b = NS.Util.readCookie("authent");
    NS.Util.not_null(b) ? (NS.User.data = JSON.parse(NS.Util.readCookie("authent")), NS.User.checkUser()) : NS.User.loadAuthent().then(function() {
      NS.User.checkUser()
    })
  }, isLogged:function() {
    var b;
    if("" === NS.User.id || null === NS.User.id) {
      NS.User.id = NS.Util.readCookie("login")
    }
    b = NS.Util.not_null(NS.User.id) ? !0 : !1;
    NS.Util.log("isLogged : " + b);
    return b
  }, loadAuthent:function() {
    var b = new NS.Promise;
    NS.App.call(NS.Cache.config.connect).then(function(h) {
      NS.User.data = h;
      NS.Util.createCookie("authent", JSON.stringify(h));
      b.resolve()
    });
    return b
  }, checkUser:function() {
    NS.Util.not_null(NS.Util.readCookie("logout-try")) && NS.Util.matchUrl(NS.User.data.logout.urls.success) ? NS.User.checkEvidences(NS.User.data.logout.evidences) && NS.User.logout() : NS.Util.not_null(NS.Util.readCookie("login-try")) && NS.Util.matchUrl(NS.User.data.login.urls.success) ? NS.User.checkEvidences(NS.User.data.login.evidences) ? NS.User.login(NS.Util.readCookie("login-try")) : NS.Util.eraseCookie("login-try") : NS.Util.not_null(NS.Util.readCookie("login")) ? NS.User.login(NS.Util.readCookie("login")) : 
    NS.User.logout()
  }, login:function(b) {
    NS.Util.log('Login "' + b + '"');
    null !== b && (NS.Util.eraseCookie("login-try"), NS.User.id = b, NS.Util.createCookie("login", b), NS.Util.not_null(NS.User.data.urls), NS.App.send(top.location.href));
    return NS.User.data.id
  }, logout:function() {
    NS.Util.log("User is out");
    NS.Util.eraseCookie("logout-try");
    NS.Util.eraseCookie("login");
    NS.User.id = null;
    NS.App.send(top.location.href)
  }, GenerateUniqueId:function() {
    var b = NS.Util.readCookie("unique-id");
    NS.Util.not_null(b) || (b = "body_" + (new Date).getTime(), NS.Util.createCookie("unique-id", b));
    return NS.User.uid = b
  }, checkEvidences:function(b) {
    var h = null, d = !0, g;
    for(g in b) {
      "id" === b[g].selector ? h = document.getElementById(b[g].name) : "class" === NS.User.data.evidences[g].selector && (h = document.getElementsByClassName(b[g].name)), null === h && (d = !1)
    }
    return d
  }, quit:function() {
    var b, d = "";
    NS.Util.createCookie("prev-url", top.location.href);
    if(NS.Util.not_null(NS.User.data.login) && NS.Util.not_null(NS.User.data.logout)) {
      if(!NS.User.isLogged() && NS.Util.matchUrl(NS.User.data.login.urls.page)) {
        for(b in NS.User.data.login.items) {
          "object" === typeof NS.User.data.login.items[b] && (d += "" !== d ? ":" : "", d += NS.Util.getValueFromObject(NS.Util.getDomElemntFromItem(NS.User.data.login.items[b])))
        }
        NS.Util.createCookie("login-try", d)
      }else {
        NS.Util.matchUrl(NS.User.data.logout.urls.page) && NS.Util.createCookie("logout-try", "logout")
      }
    }
  }};
  try {
    addToNamespace("User", d)
  }catch(g) {
    throw Error("Cannot extends 'User' to 'Adfab.playground.User'");
  }
});
pl.ready(function() {
  function d() {
    return this
  }
  d.prototype.init = function() {
    NS = Adfab.Playground;
    NS.Util.not_null(NS.Cache.settings) && NS.Util.not_null(NS.Cache.settings.apiKey) ? (NS.User.env = _plgd_settings, NS.Util.log("APIKEY FOUND \x3d " + NS.Cache.settings.apiKey), NS.App.easyXDM(), NS.App.bindEvent(), NS.User.init()) : NS.Util.log("NOT APIKEY FOUND")
  };
  d.prototype.bindEvent = function() {
    var b, d, g;
    b = NS.Cache.xmlhttp.prototype.open;
    d = NS.Cache.xmlhttp.prototype.send;
    NS.Cache.xmlhttp.prototype.open = function(d, l) {
      d || (d = "");
      l || (l = "");
      b.apply(this, arguments);
      g = d;
      "get" == d.toLowerCase() && l.split("?")
    };
    NS.Cache.xmlhttp.prototype.send = function(b, h) {
      b || (b = "");
      h || (h = "");
      d.apply(this, arguments);
      g.toLowerCase()
    };
    NS.Cache.document.onreadystatechange = function(b) {
      NS.Util.not_null(b.data) && "" != b.data && NS.App.send(b.data)
    };
    NS.Cache.window.onbeforeunload = function(b) {
      NS.User.quit();
      return null
    }
  };
  d.prototype.easyXDM = function() {
    NS.App.rpc = new easyXDM.Rpc({local:NS.Cache.protocol + NS.Cache.config.url + "easyXDM/name.html", swf:NS.Cache.protocol + NS.Cache.config.url + "easyXDM/easyxdm.swf", remote:NS.Cache.protocol + NS.Cache.config.url + "index.html"}, {remote:{request:{}}})
  };
  d.prototype.send = function(b) {
    var d = NS.Util.isUrlValid(b);
    d && (b = NS.Cache.protocol + NS.Cache.config.url + NS.Cache.config.send + "?apiKey\x3d" + NS.Cache.settings.apiKey + "\x26url\x3d" + b + "\x26uid\x3d" + NS.User.uid, NS.Util.log("send url : " + b), NS.User.isLogged() && (b += "\x26login\x3d" + NS.User.id), NS.App.rpc.request({url:b}, function(b) {
      NS.Util.log(b)
    }, function(b) {
      throw"Api Error, code : " + b.code + ", msg : " + b.message;
    }));
    return d
  };
  d.prototype.call = function(b) {
    var d = new NS.Promise;
    NS.Util.log("call service : " + b);
    NS.App.rpc.request({url:NS.Cache.protocol + NS.Cache.config.url + b + "?apiKey\x3d" + NS.Cache.settings.apiKey}, function(b) {
      d.resolve(easyXDM.getJSONObject().parse(b.data))
    }, function(b) {
      throw"Api Error, code : " + b.code + ", msg : " + b.message;
    });
    return d
  };
  var g = new d;
  try {
    addToNamespace("App", g)
  }catch(b) {
    throw Error("Cannot extends 'app' to 'Adfab.playground.App'");
  }
  g.init()
});
